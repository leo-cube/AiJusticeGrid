/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/murder-agent/direct/route";
exports.ids = ["app/api/murder-agent/direct/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmurder-agent%2Fdirect%2Froute&page=%2Fapi%2Fmurder-agent%2Fdirect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmurder-agent%2Fdirect%2Froute.ts&appDir=%2Fhome%2Fleojamescharles%2FDesktop%2Faijusticegrid%2Finvestigation-main_updated%2Finvestigation-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fleojamescharles%2FDesktop%2Faijusticegrid%2Finvestigation-main_updated%2Finvestigation-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmurder-agent%2Fdirect%2Froute&page=%2Fapi%2Fmurder-agent%2Fdirect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmurder-agent%2Fdirect%2Froute.ts&appDir=%2Fhome%2Fleojamescharles%2FDesktop%2Faijusticegrid%2Finvestigation-main_updated%2Finvestigation-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fleojamescharles%2FDesktop%2Faijusticegrid%2Finvestigation-main_updated%2Finvestigation-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_leojamescharles_Desktop_aijusticegrid_investigation_main_updated_investigation_main_src_app_api_murder_agent_direct_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/murder-agent/direct/route.ts */ \"(rsc)/./src/app/api/murder-agent/direct/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/murder-agent/direct/route\",\n        pathname: \"/api/murder-agent/direct\",\n        filename: \"route\",\n        bundlePath: \"app/api/murder-agent/direct/route\"\n    },\n    resolvedPagePath: \"/home/leojamescharles/Desktop/aijusticegrid/investigation-main_updated/investigation-main/src/app/api/murder-agent/direct/route.ts\",\n    nextConfigOutput,\n    userland: _home_leojamescharles_Desktop_aijusticegrid_investigation_main_updated_investigation_main_src_app_api_murder_agent_direct_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZtdXJkZXItYWdlbnQlMkZkaXJlY3QlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm11cmRlci1hZ2VudCUyRmRpcmVjdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm11cmRlci1hZ2VudCUyRmRpcmVjdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGbGVvamFtZXNjaGFybGVzJTJGRGVza3RvcCUyRmFpanVzdGljZWdyaWQlMkZpbnZlc3RpZ2F0aW9uLW1haW5fdXBkYXRlZCUyRmludmVzdGlnYXRpb24tbWFpbiUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGaG9tZSUyRmxlb2phbWVzY2hhcmxlcyUyRkRlc2t0b3AlMkZhaWp1c3RpY2VncmlkJTJGaW52ZXN0aWdhdGlvbi1tYWluX3VwZGF0ZWQlMkZpbnZlc3RpZ2F0aW9uLW1haW4maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2tGO0FBQy9KO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9sZW9qYW1lc2NoYXJsZXMvRGVza3RvcC9haWp1c3RpY2VncmlkL2ludmVzdGlnYXRpb24tbWFpbl91cGRhdGVkL2ludmVzdGlnYXRpb24tbWFpbi9zcmMvYXBwL2FwaS9tdXJkZXItYWdlbnQvZGlyZWN0L3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tdXJkZXItYWdlbnQvZGlyZWN0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbXVyZGVyLWFnZW50L2RpcmVjdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbXVyZGVyLWFnZW50L2RpcmVjdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL2xlb2phbWVzY2hhcmxlcy9EZXNrdG9wL2FpanVzdGljZWdyaWQvaW52ZXN0aWdhdGlvbi1tYWluX3VwZGF0ZWQvaW52ZXN0aWdhdGlvbi1tYWluL3NyYy9hcHAvYXBpL211cmRlci1hZ2VudC9kaXJlY3Qvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmurder-agent%2Fdirect%2Froute&page=%2Fapi%2Fmurder-agent%2Fdirect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmurder-agent%2Fdirect%2Froute.ts&appDir=%2Fhome%2Fleojamescharles%2FDesktop%2Faijusticegrid%2Finvestigation-main_updated%2Finvestigation-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fleojamescharles%2FDesktop%2Faijusticegrid%2Finvestigation-main_updated%2Finvestigation-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/murder-agent/direct/route.ts":
/*!**************************************************!*\
  !*** ./src/app/api/murder-agent/direct/route.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n// Murder Agent API URL\nconst MURDER_AGENT_API_URL = process.env.NEXT_PUBLIC_MURDER_AGENT_API_URL || 'http://localhost:5000/api/augment/murder';\n/**\n * Direct proxy to the Murder Agent backend\n * This avoids CORS issues when calling from the frontend\n */ async function POST(request) {\n    try {\n        const body = await request.json();\n        // Validate required fields\n        if (!body.question) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Missing required field: question'\n            }, {\n                status: 400\n            });\n        }\n        const question = body.question;\n        const context = body.context;\n        // Get the session ID if available\n        let sessionId = body.sessionId;\n        // Check if the sessionId is \"new session\" (a string literal) and set it to null\n        if (sessionId === 'new session') {\n            console.log('Received \"new session\" as session ID, setting to null to create a new session');\n            sessionId = null;\n        }\n        console.log('Murder Agent API request:', {\n            question,\n            sessionId: sessionId || 'new session',\n            context: context ? 'provided' : 'not provided'\n        });\n        // Log the full session ID for debugging\n        if (sessionId) {\n            console.log('Using session ID:', sessionId);\n        } else {\n            console.log('No session ID provided, will create a new session');\n        }\n        // Prepare case details for the Murder Agent\n        const caseDetails = {\n            question: question,\n            additional_notes: question,\n            session_id: sessionId || null\n        };\n        // Special handling for different commands\n        if (question === 'CONTINUE_ANALYSIS') {\n            console.log('Detected CONTINUE_ANALYSIS command, setting special flags');\n            caseDetails.question = 'analyze';\n            caseDetails.additional_notes = 'Please complete the analysis';\n            caseDetails.force_analysis = true;\n        } else if (question === 'FORCE_NEW_SESSION') {\n            // Force a completely new session\n            console.log('Detected FORCE_NEW_SESSION command, forcing a new session');\n            caseDetails.question = 'initialize';\n            caseDetails.additional_notes = 'Please start a new conversation';\n            caseDetails.reset_conversation = true;\n            caseDetails.force_new_session = true;\n            // Clear the session ID to ensure a new one is created\n            caseDetails.session_id = null;\n            sessionId = null;\n        } else if (question === '' || !question.trim()) {\n            // If no question is provided, this is likely an initialization request\n            console.log('Empty question detected, treating as initialization request');\n            caseDetails.question = 'initialize';\n            caseDetails.additional_notes = 'Please start a new conversation';\n            caseDetails.reset_conversation = true;\n        }\n        // If forceReset is true, ensure we're creating a new session\n        if (body.forceReset) {\n            console.log('forceReset flag detected, forcing a new session');\n            caseDetails.reset_conversation = true;\n            caseDetails.force_new_session = true;\n            // Clear the session ID to ensure a new one is created\n            caseDetails.session_id = null;\n            sessionId = null;\n        }\n        // Make sure we're explicitly setting the session_id in the request\n        if (sessionId) {\n            console.log('Setting session_id in request:', sessionId);\n            caseDetails.session_id = sessionId;\n        } else {\n            // If no session ID is provided, check if there's one in the context\n            if (context?.sessionId) {\n                console.log('Using session ID from context:', context.sessionId);\n                caseDetails.session_id = context.sessionId;\n            }\n        }\n        // Add case details from context if available\n        if (context) {\n            if (context.caseId) caseDetails.case_id = context.caseId;\n            if (context.caseName) caseDetails.case_name = context.caseName;\n            if (context.caseStatus) caseDetails.case_status = context.caseStatus;\n            if (context.casePriority) caseDetails.case_priority = context.casePriority;\n            if (context.assignedTo) caseDetails.assigned_to = context.assignedTo;\n            if (context.assignedDate) caseDetails.assigned_date = context.assignedDate;\n            if (context.location) caseDetails.location = context.location;\n            if (context.crimeDate) caseDetails.date_of_crime = context.crimeDate;\n            if (context.crimeTime) caseDetails.time_of_crime = context.crimeTime;\n            if (context.victimName) caseDetails.victim_name = context.victimName;\n            if (context.victimAge) caseDetails.victim_age = context.victimAge;\n            if (context.victimGender) caseDetails.victim_gender = context.victimGender;\n            if (context.causeOfDeath) caseDetails.cause_of_death = context.causeOfDeath;\n            if (context.weaponUsed) caseDetails.weapon_used = context.weaponUsed;\n            if (context.crimeSceneDescription) caseDetails.crime_scene_description = context.crimeSceneDescription;\n            if (context.witnesses) caseDetails.witnesses = context.witnesses;\n            if (context.evidence) caseDetails.evidence_found = context.evidence;\n            if (context.suspects) caseDetails.suspects = context.suspects;\n            // Also include any collected data from previous interactions\n            if (context.collectedData) {\n                // Merge collected data with case details, prioritizing collected data\n                Object.entries(context.collectedData).forEach(([key, value])=>{\n                    if (value) {\n                        caseDetails[key] = value;\n                    }\n                });\n            }\n            // Do NOT include the current step from context for the first message\n            // This allows the backend to properly handle the case ID\n            // Only include it for subsequent messages\n            if (context.currentStep && context.currentStep !== 'greeting' && context.currentStep !== 'case_id') {\n                caseDetails.current_step = context.currentStep;\n                console.log('Including current step in request:', context.currentStep);\n            } else {\n                console.log('Not including current step in request to allow proper case ID handling');\n            }\n        }\n        // Only generate a case ID if we're starting a new conversation and no case ID is provided\n        // Let the backend handle the first user input as the case ID\n        if (!caseDetails.case_id && (caseDetails.force_new_session || caseDetails.reset_conversation)) {\n            // Generate a case ID only for new sessions\n            caseDetails.case_id = `case_${Date.now()}`;\n            console.log('Generated case ID for new session:', caseDetails.case_id);\n        }\n        // Important: Do NOT set case_id for regular messages\n        // The backend will handle the first user message as the case ID\n        console.log('Sending case details to Murder Agent:', JSON.stringify(caseDetails));\n        console.log('Calling Murder Agent backend directly from Next.js API route:', MURDER_AGENT_API_URL);\n        // Set a timeout for the API call (60 seconds for analysis generation)\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), 60000); // 60 second timeout\n        try {\n            // Call the Murder Agent API directly\n            const response = await fetch(MURDER_AGENT_API_URL, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(caseDetails),\n                signal: controller.signal\n            });\n            // Clear the timeout\n            clearTimeout(timeoutId);\n            if (!response.ok) {\n                throw new Error(`Murder Agent API error: ${response.statusText}`);\n            }\n            const data = await response.json();\n            console.log('Murder Agent API response:', data);\n            // Log the full response for debugging\n            console.log('Full Murder Agent API response:', JSON.stringify(data));\n            // Log the collected data for debugging\n            if (data.data && data.data.collected_data) {\n                console.log('Collected data from Murder Agent:', data.data.collected_data);\n            }\n            // Log the current step for debugging\n            if (data.data && data.data.current_step) {\n                console.log('Current step from Murder Agent:', data.data.current_step);\n            }\n            // Check if the response has the expected format\n            if (data.success && data.data && data.data.analysis) {\n                // Return the analysis with a marker indicating it's from the live backend\n                console.log('Returning session ID in response:', data.session_id);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: data.data.analysis,\n                    source: 'direct-backend',\n                    sessionId: data.session_id || null,\n                    isCollectingInfo: data.data.is_collecting_info || false,\n                    currentStep: data.data.current_step || null,\n                    collectedData: data.data.collected_data || {}\n                }, {\n                    status: 200\n                });\n            } else if (data.data?.analysis) {\n                // Alternative format\n                console.log('Returning session ID in response (alternative format):', data.session_id);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: data.data.analysis,\n                    source: 'direct-backend',\n                    sessionId: data.session_id || null,\n                    isCollectingInfo: data.data.is_collecting_info || false,\n                    currentStep: data.data.current_step || null,\n                    collectedData: data.data.collected_data || {}\n                }, {\n                    status: 200\n                });\n            } else if (data.success && data.message) {\n                // Simple success message\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: data.message,\n                    source: 'direct-backend',\n                    sessionId: data.session_id || null,\n                    isCollectingInfo: true,\n                    currentStep: 'greeting'\n                }, {\n                    status: 200\n                });\n            } else if (data.response) {\n                // Simple response format\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: data.response,\n                    source: 'direct-backend',\n                    sessionId: data.session_id || null,\n                    isCollectingInfo: true,\n                    currentStep: 'greeting'\n                }, {\n                    status: 200\n                });\n            } else {\n                // Try to extract information from the response even if it doesn't match expected formats\n                console.log('Attempting to extract information from non-standard response format:', data);\n                // Check if there's any session_id in the response\n                const sessionId = data.session_id || null;\n                // Check if there's any message or text that could be used as a response\n                let responseText = null;\n                if (data.data && typeof data.data === 'object') {\n                    responseText = data.data.analysis || data.data.message || data.data.response || null;\n                }\n                if (!responseText && typeof data.message === 'string') {\n                    responseText = data.message;\n                }\n                if (!responseText && typeof data.response === 'string') {\n                    responseText = data.response;\n                }\n                // If we found something usable, return it\n                if (responseText) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        response: responseText,\n                        source: 'direct-backend',\n                        sessionId: sessionId,\n                        isCollectingInfo: true,\n                        currentStep: 'greeting'\n                    }, {\n                        status: 200\n                    });\n                }\n                console.error('Invalid response format from Murder Agent API:', data);\n                throw new Error('Invalid response format from Murder Agent API');\n            }\n        } catch (error) {\n            // Clear the timeout if it hasn't fired yet\n            clearTimeout(timeoutId);\n            console.error('Error calling Murder Agent API directly:', error);\n            // If the error is due to the timeout, return a specific message\n            if (error.name === 'AbortError') {\n                // Check if we're at the analysis step (final step)\n                const isAnalysisStep = caseDetails.current_step === 'additional_notes' || caseDetails.collected_data && Object.keys(caseDetails.collected_data).length > 5;\n                if (isAnalysisStep) {\n                    console.log('Timeout occurred during analysis generation, returning a helpful message');\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        response: \"I'm generating a detailed analysis of your case, but it's taking longer than expected. This is normal for complex cases. Please try sending 'continue' or 'analyze' to complete the analysis.\",\n                        source: 'error',\n                        sessionId: caseDetails.session_id || null,\n                        isCollectingInfo: true,\n                        currentStep: 'analysis_pending'\n                    }, {\n                        status: 200\n                    });\n                } else {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        response: \"I'm sorry, but the connection to the Murder Agent backend timed out. Please try again later or check if the backend service is running.\",\n                        source: 'error',\n                        sessionId: null,\n                        isCollectingInfo: false\n                    }, {\n                        status: 200\n                    });\n                }\n            }\n            // Fall back to the original route\n            try {\n                const fallbackResponse = await fetch('/api/murder-agent', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        question,\n                        context\n                    })\n                });\n                if (fallbackResponse.ok) {\n                    const data = await fallbackResponse.json();\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        response: data.response,\n                        source: 'fallback',\n                        sessionId: data.sessionId || null,\n                        isCollectingInfo: data.isCollectingInfo || false,\n                        currentStep: data.currentStep || null,\n                        collectedData: data.collectedData || null\n                    }, {\n                        status: 200\n                    });\n                } else {\n                    throw new Error('Fallback Murder Agent API call failed');\n                }\n            } catch (fallbackError) {\n                console.error('Error with fallback Murder Agent API call:', fallbackError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: `I'm sorry, but I couldn't connect to the Murder Agent backend. The error was: ${error.message}. Please try again later or check if the backend service is running.`,\n                    source: 'error',\n                    sessionId: null,\n                    isCollectingInfo: false\n                }, {\n                    status: 200\n                });\n            }\n        }\n    } catch (error) {\n        console.error('Error processing direct Murder Agent request:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            response: `I'm sorry, but there was an error processing your request: ${error.message}. Please try again.`,\n            source: 'error',\n            sessionId: null,\n            isCollectingInfo: false\n        }, {\n            status: 200\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tdXJkZXItYWdlbnQvZGlyZWN0L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJDO0FBRzNDLHVCQUF1QjtBQUN2QixNQUFNQyx1QkFBdUJDLFFBQVFDLEdBQUcsQ0FBQ0MsZ0NBQWdDLElBQUk7QUFFN0U7OztDQUdDLEdBQ00sZUFBZUMsS0FBS0MsT0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUQsUUFBUUUsSUFBSTtRQUUvQiwyQkFBMkI7UUFDM0IsSUFBSSxDQUFDRCxLQUFLRSxRQUFRLEVBQUU7WUFDbEIsT0FBT1QscURBQVlBLENBQUNRLElBQUksQ0FDdEI7Z0JBQUVFLE9BQU87WUFBbUMsR0FDNUM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1GLFdBQVdGLEtBQUtFLFFBQVE7UUFDOUIsTUFBTUcsVUFBVUwsS0FBS0ssT0FBTztRQUU1QixrQ0FBa0M7UUFDbEMsSUFBSUMsWUFBWU4sS0FBS00sU0FBUztRQUU5QixnRkFBZ0Y7UUFDaEYsSUFBSUEsY0FBYyxlQUFlO1lBQy9CQyxRQUFRQyxHQUFHLENBQUM7WUFDWkYsWUFBWTtRQUNkO1FBRUFDLFFBQVFDLEdBQUcsQ0FBQyw2QkFBNkI7WUFDdkNOO1lBQ0FJLFdBQVdBLGFBQWE7WUFDeEJELFNBQVNBLFVBQVUsYUFBYTtRQUNsQztRQUVBLHdDQUF3QztRQUN4QyxJQUFJQyxXQUFXO1lBQ2JDLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJGO1FBQ25DLE9BQU87WUFDTEMsUUFBUUMsR0FBRyxDQUFDO1FBQ2Q7UUFFQSw0Q0FBNEM7UUFDNUMsTUFBTUMsY0FBbUM7WUFDdkNQLFVBQVVBO1lBQ1ZRLGtCQUFrQlI7WUFDbEJTLFlBQVlMLGFBQWE7UUFDM0I7UUFFQSwwQ0FBMEM7UUFDMUMsSUFBSUosYUFBYSxxQkFBcUI7WUFDcENLLFFBQVFDLEdBQUcsQ0FBQztZQUNaQyxZQUFZUCxRQUFRLEdBQUc7WUFDdkJPLFlBQVlDLGdCQUFnQixH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T0FBT1IscURBQVlBLENBQUNRLElBQUksQ0FBQzt3QkFDdkJrRSxVQUFVUyxLQUFLVCxRQUFRO3dCQUN2QmEsUUFBUTt3QkFDUjFFLFdBQVdzRSxLQUFLdEUsU0FBUyxJQUFJO3dCQUM3QjJFLGtCQUFrQkwsS0FBS0ssZ0JBQWdCLElBQUk7d0JBQzNDekIsYUFBYW9CLEtBQUtwQixXQUFXLElBQUk7d0JBQ2pDTixlQUFlMEIsS0FBSzFCLGFBQWEsSUFBSTtvQkFDdkMsR0FBRzt3QkFBRTlDLFFBQVE7b0JBQUk7Z0JBQ25CLE9BQU87b0JBQ0wsTUFBTSxJQUFJc0UsTUFBTTtnQkFDbEI7WUFDRixFQUFFLE9BQU9nQixlQUFlO2dCQUN0Qm5GLFFBQVFKLEtBQUssQ0FBQyw4Q0FBOEN1RjtnQkFDNUQsT0FBT2pHLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7b0JBQ3ZCa0UsVUFBVSxDQUFDLDhFQUE4RSxFQUFFaEUsTUFBTWdGLE9BQU8sQ0FBQyxvRUFBb0UsQ0FBQztvQkFDOUtILFFBQVE7b0JBQ1IxRSxXQUFXO29CQUNYMkUsa0JBQWtCO2dCQUNwQixHQUFHO29CQUFFN0UsUUFBUTtnQkFBSTtZQUNuQjtRQUNGO0lBQ0YsRUFBRSxPQUFPRCxPQUFZO1FBQ25CSSxRQUFRSixLQUFLLENBQUMsaURBQWlEQTtRQUMvRCxPQUFPVixxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO1lBQ3ZCa0UsVUFBVSxDQUFDLDJEQUEyRCxFQUFFaEUsTUFBTWdGLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztZQUMxR0gsUUFBUTtZQUNSMUUsV0FBVztZQUNYMkUsa0JBQWtCO1FBQ3BCLEdBQUc7WUFBRTdFLFFBQVE7UUFBSTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9sZW9qYW1lc2NoYXJsZXMvRGVza3RvcC9haWp1c3RpY2VncmlkL2ludmVzdGlnYXRpb24tbWFpbl91cGRhdGVkL2ludmVzdGlnYXRpb24tbWFpbi9zcmMvYXBwL2FwaS9tdXJkZXItYWdlbnQvZGlyZWN0L3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IENoYXRDb250ZXh0IH0gZnJvbSAnQC9hcHAvdHlwZXMnO1xuXG4vLyBNdXJkZXIgQWdlbnQgQVBJIFVSTFxuY29uc3QgTVVSREVSX0FHRU5UX0FQSV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19NVVJERVJfQUdFTlRfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2FwaS9hdWdtZW50L211cmRlcic7XG5cbi8qKlxuICogRGlyZWN0IHByb3h5IHRvIHRoZSBNdXJkZXIgQWdlbnQgYmFja2VuZFxuICogVGhpcyBhdm9pZHMgQ09SUyBpc3N1ZXMgd2hlbiBjYWxsaW5nIGZyb20gdGhlIGZyb250ZW5kXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcbiAgICBpZiAoIWJvZHkucXVlc3Rpb24pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGQ6IHF1ZXN0aW9uJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgcXVlc3Rpb24gPSBib2R5LnF1ZXN0aW9uO1xuICAgIGNvbnN0IGNvbnRleHQgPSBib2R5LmNvbnRleHQgYXMgQ2hhdENvbnRleHQ7XG5cbiAgICAvLyBHZXQgdGhlIHNlc3Npb24gSUQgaWYgYXZhaWxhYmxlXG4gICAgbGV0IHNlc3Npb25JZCA9IGJvZHkuc2Vzc2lvbklkO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHNlc3Npb25JZCBpcyBcIm5ldyBzZXNzaW9uXCIgKGEgc3RyaW5nIGxpdGVyYWwpIGFuZCBzZXQgaXQgdG8gbnVsbFxuICAgIGlmIChzZXNzaW9uSWQgPT09ICduZXcgc2Vzc2lvbicpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCBcIm5ldyBzZXNzaW9uXCIgYXMgc2Vzc2lvbiBJRCwgc2V0dGluZyB0byBudWxsIHRvIGNyZWF0ZSBhIG5ldyBzZXNzaW9uJyk7XG4gICAgICBzZXNzaW9uSWQgPSBudWxsO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdNdXJkZXIgQWdlbnQgQVBJIHJlcXVlc3Q6Jywge1xuICAgICAgcXVlc3Rpb24sXG4gICAgICBzZXNzaW9uSWQ6IHNlc3Npb25JZCB8fCAnbmV3IHNlc3Npb24nLFxuICAgICAgY29udGV4dDogY29udGV4dCA/ICdwcm92aWRlZCcgOiAnbm90IHByb3ZpZGVkJ1xuICAgIH0pO1xuXG4gICAgLy8gTG9nIHRoZSBmdWxsIHNlc3Npb24gSUQgZm9yIGRlYnVnZ2luZ1xuICAgIGlmIChzZXNzaW9uSWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBzZXNzaW9uIElEOicsIHNlc3Npb25JZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyBzZXNzaW9uIElEIHByb3ZpZGVkLCB3aWxsIGNyZWF0ZSBhIG5ldyBzZXNzaW9uJyk7XG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSBjYXNlIGRldGFpbHMgZm9yIHRoZSBNdXJkZXIgQWdlbnRcbiAgICBjb25zdCBjYXNlRGV0YWlsczogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcbiAgICAgIHF1ZXN0aW9uOiBxdWVzdGlvbixcbiAgICAgIGFkZGl0aW9uYWxfbm90ZXM6IHF1ZXN0aW9uLFxuICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbklkIHx8IG51bGwsXG4gICAgfTtcblxuICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIGRpZmZlcmVudCBjb21tYW5kc1xuICAgIGlmIChxdWVzdGlvbiA9PT0gJ0NPTlRJTlVFX0FOQUxZU0lTJykge1xuICAgICAgY29uc29sZS5sb2coJ0RldGVjdGVkIENPTlRJTlVFX0FOQUxZU0lTIGNvbW1hbmQsIHNldHRpbmcgc3BlY2lhbCBmbGFncycpO1xuICAgICAgY2FzZURldGFpbHMucXVlc3Rpb24gPSAnYW5hbHl6ZSc7XG4gICAgICBjYXNlRGV0YWlscy5hZGRpdGlvbmFsX25vdGVzID0gJ1BsZWFzZSBjb21wbGV0ZSB0aGUgYW5hbHlzaXMnO1xuICAgICAgY2FzZURldGFpbHMuZm9yY2VfYW5hbHlzaXMgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAocXVlc3Rpb24gPT09ICdGT1JDRV9ORVdfU0VTU0lPTicpIHtcbiAgICAgIC8vIEZvcmNlIGEgY29tcGxldGVseSBuZXcgc2Vzc2lvblxuICAgICAgY29uc29sZS5sb2coJ0RldGVjdGVkIEZPUkNFX05FV19TRVNTSU9OIGNvbW1hbmQsIGZvcmNpbmcgYSBuZXcgc2Vzc2lvbicpO1xuICAgICAgY2FzZURldGFpbHMucXVlc3Rpb24gPSAnaW5pdGlhbGl6ZSc7XG4gICAgICBjYXNlRGV0YWlscy5hZGRpdGlvbmFsX25vdGVzID0gJ1BsZWFzZSBzdGFydCBhIG5ldyBjb252ZXJzYXRpb24nO1xuICAgICAgY2FzZURldGFpbHMucmVzZXRfY29udmVyc2F0aW9uID0gdHJ1ZTtcbiAgICAgIGNhc2VEZXRhaWxzLmZvcmNlX25ld19zZXNzaW9uID0gdHJ1ZTtcblxuICAgICAgLy8gQ2xlYXIgdGhlIHNlc3Npb24gSUQgdG8gZW5zdXJlIGEgbmV3IG9uZSBpcyBjcmVhdGVkXG4gICAgICBjYXNlRGV0YWlscy5zZXNzaW9uX2lkID0gbnVsbDtcbiAgICAgIHNlc3Npb25JZCA9IG51bGw7XG4gICAgfSBlbHNlIGlmIChxdWVzdGlvbiA9PT0gJycgfHwgIXF1ZXN0aW9uLnRyaW0oKSkge1xuICAgICAgLy8gSWYgbm8gcXVlc3Rpb24gaXMgcHJvdmlkZWQsIHRoaXMgaXMgbGlrZWx5IGFuIGluaXRpYWxpemF0aW9uIHJlcXVlc3RcbiAgICAgIGNvbnNvbGUubG9nKCdFbXB0eSBxdWVzdGlvbiBkZXRlY3RlZCwgdHJlYXRpbmcgYXMgaW5pdGlhbGl6YXRpb24gcmVxdWVzdCcpO1xuICAgICAgY2FzZURldGFpbHMucXVlc3Rpb24gPSAnaW5pdGlhbGl6ZSc7XG4gICAgICBjYXNlRGV0YWlscy5hZGRpdGlvbmFsX25vdGVzID0gJ1BsZWFzZSBzdGFydCBhIG5ldyBjb252ZXJzYXRpb24nO1xuICAgICAgY2FzZURldGFpbHMucmVzZXRfY29udmVyc2F0aW9uID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBJZiBmb3JjZVJlc2V0IGlzIHRydWUsIGVuc3VyZSB3ZSdyZSBjcmVhdGluZyBhIG5ldyBzZXNzaW9uXG4gICAgaWYgKGJvZHkuZm9yY2VSZXNldCkge1xuICAgICAgY29uc29sZS5sb2coJ2ZvcmNlUmVzZXQgZmxhZyBkZXRlY3RlZCwgZm9yY2luZyBhIG5ldyBzZXNzaW9uJyk7XG4gICAgICBjYXNlRGV0YWlscy5yZXNldF9jb252ZXJzYXRpb24gPSB0cnVlO1xuICAgICAgY2FzZURldGFpbHMuZm9yY2VfbmV3X3Nlc3Npb24gPSB0cnVlO1xuXG4gICAgICAvLyBDbGVhciB0aGUgc2Vzc2lvbiBJRCB0byBlbnN1cmUgYSBuZXcgb25lIGlzIGNyZWF0ZWRcbiAgICAgIGNhc2VEZXRhaWxzLnNlc3Npb25faWQgPSBudWxsO1xuICAgICAgc2Vzc2lvbklkID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBNYWtlIHN1cmUgd2UncmUgZXhwbGljaXRseSBzZXR0aW5nIHRoZSBzZXNzaW9uX2lkIGluIHRoZSByZXF1ZXN0XG4gICAgaWYgKHNlc3Npb25JZCkge1xuICAgICAgY29uc29sZS5sb2coJ1NldHRpbmcgc2Vzc2lvbl9pZCBpbiByZXF1ZXN0OicsIHNlc3Npb25JZCk7XG4gICAgICBjYXNlRGV0YWlscy5zZXNzaW9uX2lkID0gc2Vzc2lvbklkO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBubyBzZXNzaW9uIElEIGlzIHByb3ZpZGVkLCBjaGVjayBpZiB0aGVyZSdzIG9uZSBpbiB0aGUgY29udGV4dFxuICAgICAgaWYgKGNvbnRleHQ/LnNlc3Npb25JZCkge1xuICAgICAgICBjb25zb2xlLmxvZygnVXNpbmcgc2Vzc2lvbiBJRCBmcm9tIGNvbnRleHQ6JywgY29udGV4dC5zZXNzaW9uSWQpO1xuICAgICAgICBjYXNlRGV0YWlscy5zZXNzaW9uX2lkID0gY29udGV4dC5zZXNzaW9uSWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIGNhc2UgZGV0YWlscyBmcm9tIGNvbnRleHQgaWYgYXZhaWxhYmxlXG4gICAgaWYgKGNvbnRleHQpIHtcbiAgICAgIGlmIChjb250ZXh0LmNhc2VJZCkgY2FzZURldGFpbHMuY2FzZV9pZCA9IGNvbnRleHQuY2FzZUlkO1xuICAgICAgaWYgKGNvbnRleHQuY2FzZU5hbWUpIGNhc2VEZXRhaWxzLmNhc2VfbmFtZSA9IGNvbnRleHQuY2FzZU5hbWU7XG4gICAgICBpZiAoY29udGV4dC5jYXNlU3RhdHVzKSBjYXNlRGV0YWlscy5jYXNlX3N0YXR1cyA9IGNvbnRleHQuY2FzZVN0YXR1cztcbiAgICAgIGlmIChjb250ZXh0LmNhc2VQcmlvcml0eSkgY2FzZURldGFpbHMuY2FzZV9wcmlvcml0eSA9IGNvbnRleHQuY2FzZVByaW9yaXR5O1xuICAgICAgaWYgKGNvbnRleHQuYXNzaWduZWRUbykgY2FzZURldGFpbHMuYXNzaWduZWRfdG8gPSBjb250ZXh0LmFzc2lnbmVkVG87XG4gICAgICBpZiAoY29udGV4dC5hc3NpZ25lZERhdGUpIGNhc2VEZXRhaWxzLmFzc2lnbmVkX2RhdGUgPSBjb250ZXh0LmFzc2lnbmVkRGF0ZTtcbiAgICAgIGlmIChjb250ZXh0LmxvY2F0aW9uKSBjYXNlRGV0YWlscy5sb2NhdGlvbiA9IGNvbnRleHQubG9jYXRpb247XG4gICAgICBpZiAoY29udGV4dC5jcmltZURhdGUpIGNhc2VEZXRhaWxzLmRhdGVfb2ZfY3JpbWUgPSBjb250ZXh0LmNyaW1lRGF0ZTtcbiAgICAgIGlmIChjb250ZXh0LmNyaW1lVGltZSkgY2FzZURldGFpbHMudGltZV9vZl9jcmltZSA9IGNvbnRleHQuY3JpbWVUaW1lO1xuICAgICAgaWYgKGNvbnRleHQudmljdGltTmFtZSkgY2FzZURldGFpbHMudmljdGltX25hbWUgPSBjb250ZXh0LnZpY3RpbU5hbWU7XG4gICAgICBpZiAoY29udGV4dC52aWN0aW1BZ2UpIGNhc2VEZXRhaWxzLnZpY3RpbV9hZ2UgPSBjb250ZXh0LnZpY3RpbUFnZTtcbiAgICAgIGlmIChjb250ZXh0LnZpY3RpbUdlbmRlcikgY2FzZURldGFpbHMudmljdGltX2dlbmRlciA9IGNvbnRleHQudmljdGltR2VuZGVyO1xuICAgICAgaWYgKGNvbnRleHQuY2F1c2VPZkRlYXRoKSBjYXNlRGV0YWlscy5jYXVzZV9vZl9kZWF0aCA9IGNvbnRleHQuY2F1c2VPZkRlYXRoO1xuICAgICAgaWYgKGNvbnRleHQud2VhcG9uVXNlZCkgY2FzZURldGFpbHMud2VhcG9uX3VzZWQgPSBjb250ZXh0LndlYXBvblVzZWQ7XG4gICAgICBpZiAoY29udGV4dC5jcmltZVNjZW5lRGVzY3JpcHRpb24pIGNhc2VEZXRhaWxzLmNyaW1lX3NjZW5lX2Rlc2NyaXB0aW9uID0gY29udGV4dC5jcmltZVNjZW5lRGVzY3JpcHRpb247XG4gICAgICBpZiAoY29udGV4dC53aXRuZXNzZXMpIGNhc2VEZXRhaWxzLndpdG5lc3NlcyA9IGNvbnRleHQud2l0bmVzc2VzO1xuICAgICAgaWYgKGNvbnRleHQuZXZpZGVuY2UpIGNhc2VEZXRhaWxzLmV2aWRlbmNlX2ZvdW5kID0gY29udGV4dC5ldmlkZW5jZTtcbiAgICAgIGlmIChjb250ZXh0LnN1c3BlY3RzKSBjYXNlRGV0YWlscy5zdXNwZWN0cyA9IGNvbnRleHQuc3VzcGVjdHM7XG5cbiAgICAgIC8vIEFsc28gaW5jbHVkZSBhbnkgY29sbGVjdGVkIGRhdGEgZnJvbSBwcmV2aW91cyBpbnRlcmFjdGlvbnNcbiAgICAgIGlmIChjb250ZXh0LmNvbGxlY3RlZERhdGEpIHtcbiAgICAgICAgLy8gTWVyZ2UgY29sbGVjdGVkIGRhdGEgd2l0aCBjYXNlIGRldGFpbHMsIHByaW9yaXRpemluZyBjb2xsZWN0ZWQgZGF0YVxuICAgICAgICBPYmplY3QuZW50cmllcyhjb250ZXh0LmNvbGxlY3RlZERhdGEpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgY2FzZURldGFpbHNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIERvIE5PVCBpbmNsdWRlIHRoZSBjdXJyZW50IHN0ZXAgZnJvbSBjb250ZXh0IGZvciB0aGUgZmlyc3QgbWVzc2FnZVxuICAgICAgLy8gVGhpcyBhbGxvd3MgdGhlIGJhY2tlbmQgdG8gcHJvcGVybHkgaGFuZGxlIHRoZSBjYXNlIElEXG4gICAgICAvLyBPbmx5IGluY2x1ZGUgaXQgZm9yIHN1YnNlcXVlbnQgbWVzc2FnZXNcbiAgICAgIGlmIChjb250ZXh0LmN1cnJlbnRTdGVwICYmIGNvbnRleHQuY3VycmVudFN0ZXAgIT09ICdncmVldGluZycgJiYgY29udGV4dC5jdXJyZW50U3RlcCAhPT0gJ2Nhc2VfaWQnKSB7XG4gICAgICAgIGNhc2VEZXRhaWxzLmN1cnJlbnRfc3RlcCA9IGNvbnRleHQuY3VycmVudFN0ZXA7XG4gICAgICAgIGNvbnNvbGUubG9nKCdJbmNsdWRpbmcgY3VycmVudCBzdGVwIGluIHJlcXVlc3Q6JywgY29udGV4dC5jdXJyZW50U3RlcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnTm90IGluY2x1ZGluZyBjdXJyZW50IHN0ZXAgaW4gcmVxdWVzdCB0byBhbGxvdyBwcm9wZXIgY2FzZSBJRCBoYW5kbGluZycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE9ubHkgZ2VuZXJhdGUgYSBjYXNlIElEIGlmIHdlJ3JlIHN0YXJ0aW5nIGEgbmV3IGNvbnZlcnNhdGlvbiBhbmQgbm8gY2FzZSBJRCBpcyBwcm92aWRlZFxuICAgIC8vIExldCB0aGUgYmFja2VuZCBoYW5kbGUgdGhlIGZpcnN0IHVzZXIgaW5wdXQgYXMgdGhlIGNhc2UgSURcbiAgICBpZiAoIWNhc2VEZXRhaWxzLmNhc2VfaWQgJiYgKGNhc2VEZXRhaWxzLmZvcmNlX25ld19zZXNzaW9uIHx8IGNhc2VEZXRhaWxzLnJlc2V0X2NvbnZlcnNhdGlvbikpIHtcbiAgICAgIC8vIEdlbmVyYXRlIGEgY2FzZSBJRCBvbmx5IGZvciBuZXcgc2Vzc2lvbnNcbiAgICAgIGNhc2VEZXRhaWxzLmNhc2VfaWQgPSBgY2FzZV8ke0RhdGUubm93KCl9YDtcbiAgICAgIGNvbnNvbGUubG9nKCdHZW5lcmF0ZWQgY2FzZSBJRCBmb3IgbmV3IHNlc3Npb246JywgY2FzZURldGFpbHMuY2FzZV9pZCk7XG4gICAgfVxuXG4gICAgLy8gSW1wb3J0YW50OiBEbyBOT1Qgc2V0IGNhc2VfaWQgZm9yIHJlZ3VsYXIgbWVzc2FnZXNcbiAgICAvLyBUaGUgYmFja2VuZCB3aWxsIGhhbmRsZSB0aGUgZmlyc3QgdXNlciBtZXNzYWdlIGFzIHRoZSBjYXNlIElEXG5cbiAgICBjb25zb2xlLmxvZygnU2VuZGluZyBjYXNlIGRldGFpbHMgdG8gTXVyZGVyIEFnZW50OicsIEpTT04uc3RyaW5naWZ5KGNhc2VEZXRhaWxzKSk7XG5cbiAgICBjb25zb2xlLmxvZygnQ2FsbGluZyBNdXJkZXIgQWdlbnQgYmFja2VuZCBkaXJlY3RseSBmcm9tIE5leHQuanMgQVBJIHJvdXRlOicsIE1VUkRFUl9BR0VOVF9BUElfVVJMKTtcblxuICAgIC8vIFNldCBhIHRpbWVvdXQgZm9yIHRoZSBBUEkgY2FsbCAoNjAgc2Vjb25kcyBmb3IgYW5hbHlzaXMgZ2VuZXJhdGlvbilcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCA2MDAwMCk7IC8vIDYwIHNlY29uZCB0aW1lb3V0XG5cbiAgICB0cnkge1xuICAgICAgLy8gQ2FsbCB0aGUgTXVyZGVyIEFnZW50IEFQSSBkaXJlY3RseVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChNVVJERVJfQUdFTlRfQVBJX1VSTCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNhc2VEZXRhaWxzKSxcbiAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbFxuICAgICAgfSk7XG5cbiAgICAgIC8vIENsZWFyIHRoZSB0aW1lb3V0XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE11cmRlciBBZ2VudCBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKCdNdXJkZXIgQWdlbnQgQVBJIHJlc3BvbnNlOicsIGRhdGEpO1xuXG4gICAgICAvLyBMb2cgdGhlIGZ1bGwgcmVzcG9uc2UgZm9yIGRlYnVnZ2luZ1xuICAgICAgY29uc29sZS5sb2coJ0Z1bGwgTXVyZGVyIEFnZW50IEFQSSByZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG5cbiAgICAgIC8vIExvZyB0aGUgY29sbGVjdGVkIGRhdGEgZm9yIGRlYnVnZ2luZ1xuICAgICAgaWYgKGRhdGEuZGF0YSAmJiBkYXRhLmRhdGEuY29sbGVjdGVkX2RhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0NvbGxlY3RlZCBkYXRhIGZyb20gTXVyZGVyIEFnZW50OicsIGRhdGEuZGF0YS5jb2xsZWN0ZWRfZGF0YSk7XG4gICAgICB9XG5cbiAgICAgIC8vIExvZyB0aGUgY3VycmVudCBzdGVwIGZvciBkZWJ1Z2dpbmdcbiAgICAgIGlmIChkYXRhLmRhdGEgJiYgZGF0YS5kYXRhLmN1cnJlbnRfc3RlcCkge1xuICAgICAgICBjb25zb2xlLmxvZygnQ3VycmVudCBzdGVwIGZyb20gTXVyZGVyIEFnZW50OicsIGRhdGEuZGF0YS5jdXJyZW50X3N0ZXApO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiB0aGUgcmVzcG9uc2UgaGFzIHRoZSBleHBlY3RlZCBmb3JtYXRcbiAgICAgIGlmIChkYXRhLnN1Y2Nlc3MgJiYgZGF0YS5kYXRhICYmIGRhdGEuZGF0YS5hbmFseXNpcykge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIGFuYWx5c2lzIHdpdGggYSBtYXJrZXIgaW5kaWNhdGluZyBpdCdzIGZyb20gdGhlIGxpdmUgYmFja2VuZFxuICAgICAgICBjb25zb2xlLmxvZygnUmV0dXJuaW5nIHNlc3Npb24gSUQgaW4gcmVzcG9uc2U6JywgZGF0YS5zZXNzaW9uX2lkKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICByZXNwb25zZTogZGF0YS5kYXRhLmFuYWx5c2lzLFxuICAgICAgICAgIHNvdXJjZTogJ2RpcmVjdC1iYWNrZW5kJyxcbiAgICAgICAgICBzZXNzaW9uSWQ6IGRhdGEuc2Vzc2lvbl9pZCB8fCBudWxsLFxuICAgICAgICAgIGlzQ29sbGVjdGluZ0luZm86IGRhdGEuZGF0YS5pc19jb2xsZWN0aW5nX2luZm8gfHwgZmFsc2UsXG4gICAgICAgICAgY3VycmVudFN0ZXA6IGRhdGEuZGF0YS5jdXJyZW50X3N0ZXAgfHwgbnVsbCxcbiAgICAgICAgICBjb2xsZWN0ZWREYXRhOiBkYXRhLmRhdGEuY29sbGVjdGVkX2RhdGEgfHwge31cbiAgICAgICAgfSwgeyBzdGF0dXM6IDIwMCB9KTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhPy5hbmFseXNpcykge1xuICAgICAgICAvLyBBbHRlcm5hdGl2ZSBmb3JtYXRcbiAgICAgICAgY29uc29sZS5sb2coJ1JldHVybmluZyBzZXNzaW9uIElEIGluIHJlc3BvbnNlIChhbHRlcm5hdGl2ZSBmb3JtYXQpOicsIGRhdGEuc2Vzc2lvbl9pZCk7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgcmVzcG9uc2U6IGRhdGEuZGF0YS5hbmFseXNpcyxcbiAgICAgICAgICBzb3VyY2U6ICdkaXJlY3QtYmFja2VuZCcsXG4gICAgICAgICAgc2Vzc2lvbklkOiBkYXRhLnNlc3Npb25faWQgfHwgbnVsbCxcbiAgICAgICAgICBpc0NvbGxlY3RpbmdJbmZvOiBkYXRhLmRhdGEuaXNfY29sbGVjdGluZ19pbmZvIHx8IGZhbHNlLFxuICAgICAgICAgIGN1cnJlbnRTdGVwOiBkYXRhLmRhdGEuY3VycmVudF9zdGVwIHx8IG51bGwsXG4gICAgICAgICAgY29sbGVjdGVkRGF0YTogZGF0YS5kYXRhLmNvbGxlY3RlZF9kYXRhIHx8IHt9XG4gICAgICAgIH0sIHsgc3RhdHVzOiAyMDAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEuc3VjY2VzcyAmJiBkYXRhLm1lc3NhZ2UpIHtcbiAgICAgICAgLy8gU2ltcGxlIHN1Y2Nlc3MgbWVzc2FnZVxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHJlc3BvbnNlOiBkYXRhLm1lc3NhZ2UsXG4gICAgICAgICAgc291cmNlOiAnZGlyZWN0LWJhY2tlbmQnLFxuICAgICAgICAgIHNlc3Npb25JZDogZGF0YS5zZXNzaW9uX2lkIHx8IG51bGwsXG4gICAgICAgICAgaXNDb2xsZWN0aW5nSW5mbzogdHJ1ZSxcbiAgICAgICAgICBjdXJyZW50U3RlcDogJ2dyZWV0aW5nJ1xuICAgICAgICB9LCB7IHN0YXR1czogMjAwIH0pO1xuICAgICAgfSBlbHNlIGlmIChkYXRhLnJlc3BvbnNlKSB7XG4gICAgICAgIC8vIFNpbXBsZSByZXNwb25zZSBmb3JtYXRcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICByZXNwb25zZTogZGF0YS5yZXNwb25zZSxcbiAgICAgICAgICBzb3VyY2U6ICdkaXJlY3QtYmFja2VuZCcsXG4gICAgICAgICAgc2Vzc2lvbklkOiBkYXRhLnNlc3Npb25faWQgfHwgbnVsbCxcbiAgICAgICAgICBpc0NvbGxlY3RpbmdJbmZvOiB0cnVlLFxuICAgICAgICAgIGN1cnJlbnRTdGVwOiAnZ3JlZXRpbmcnXG4gICAgICAgIH0sIHsgc3RhdHVzOiAyMDAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUcnkgdG8gZXh0cmFjdCBpbmZvcm1hdGlvbiBmcm9tIHRoZSByZXNwb25zZSBldmVuIGlmIGl0IGRvZXNuJ3QgbWF0Y2ggZXhwZWN0ZWQgZm9ybWF0c1xuICAgICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byBleHRyYWN0IGluZm9ybWF0aW9uIGZyb20gbm9uLXN0YW5kYXJkIHJlc3BvbnNlIGZvcm1hdDonLCBkYXRhKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGFueSBzZXNzaW9uX2lkIGluIHRoZSByZXNwb25zZVxuICAgICAgICBjb25zdCBzZXNzaW9uSWQgPSBkYXRhLnNlc3Npb25faWQgfHwgbnVsbDtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGFueSBtZXNzYWdlIG9yIHRleHQgdGhhdCBjb3VsZCBiZSB1c2VkIGFzIGEgcmVzcG9uc2VcbiAgICAgICAgbGV0IHJlc3BvbnNlVGV4dCA9IG51bGw7XG4gICAgICAgIGlmIChkYXRhLmRhdGEgJiYgdHlwZW9mIGRhdGEuZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICByZXNwb25zZVRleHQgPSBkYXRhLmRhdGEuYW5hbHlzaXMgfHwgZGF0YS5kYXRhLm1lc3NhZ2UgfHwgZGF0YS5kYXRhLnJlc3BvbnNlIHx8IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlc3BvbnNlVGV4dCAmJiB0eXBlb2YgZGF0YS5tZXNzYWdlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJlc3BvbnNlVGV4dCA9IGRhdGEubWVzc2FnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcmVzcG9uc2VUZXh0ICYmIHR5cGVvZiBkYXRhLnJlc3BvbnNlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJlc3BvbnNlVGV4dCA9IGRhdGEucmVzcG9uc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB3ZSBmb3VuZCBzb21ldGhpbmcgdXNhYmxlLCByZXR1cm4gaXRcbiAgICAgICAgaWYgKHJlc3BvbnNlVGV4dCkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2VUZXh0LFxuICAgICAgICAgICAgc291cmNlOiAnZGlyZWN0LWJhY2tlbmQnLFxuICAgICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWQsXG4gICAgICAgICAgICBpc0NvbGxlY3RpbmdJbmZvOiB0cnVlLFxuICAgICAgICAgICAgY3VycmVudFN0ZXA6ICdncmVldGluZydcbiAgICAgICAgICB9LCB7IHN0YXR1czogMjAwIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCByZXNwb25zZSBmb3JtYXQgZnJvbSBNdXJkZXIgQWdlbnQgQVBJOicsIGRhdGEpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0IGZyb20gTXVyZGVyIEFnZW50IEFQSScpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIC8vIENsZWFyIHRoZSB0aW1lb3V0IGlmIGl0IGhhc24ndCBmaXJlZCB5ZXRcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxsaW5nIE11cmRlciBBZ2VudCBBUEkgZGlyZWN0bHk6JywgZXJyb3IpO1xuXG4gICAgICAvLyBJZiB0aGUgZXJyb3IgaXMgZHVlIHRvIHRoZSB0aW1lb3V0LCByZXR1cm4gYSBzcGVjaWZpYyBtZXNzYWdlXG4gICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGF0IHRoZSBhbmFseXNpcyBzdGVwIChmaW5hbCBzdGVwKVxuICAgICAgICBjb25zdCBpc0FuYWx5c2lzU3RlcCA9IGNhc2VEZXRhaWxzLmN1cnJlbnRfc3RlcCA9PT0gJ2FkZGl0aW9uYWxfbm90ZXMnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2FzZURldGFpbHMuY29sbGVjdGVkX2RhdGEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjYXNlRGV0YWlscy5jb2xsZWN0ZWRfZGF0YSkubGVuZ3RoID4gNSk7XG5cbiAgICAgICAgaWYgKGlzQW5hbHlzaXNTdGVwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1RpbWVvdXQgb2NjdXJyZWQgZHVyaW5nIGFuYWx5c2lzIGdlbmVyYXRpb24sIHJldHVybmluZyBhIGhlbHBmdWwgbWVzc2FnZScpO1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICByZXNwb25zZTogXCJJJ20gZ2VuZXJhdGluZyBhIGRldGFpbGVkIGFuYWx5c2lzIG9mIHlvdXIgY2FzZSwgYnV0IGl0J3MgdGFraW5nIGxvbmdlciB0aGFuIGV4cGVjdGVkLiBUaGlzIGlzIG5vcm1hbCBmb3IgY29tcGxleCBjYXNlcy4gUGxlYXNlIHRyeSBzZW5kaW5nICdjb250aW51ZScgb3IgJ2FuYWx5emUnIHRvIGNvbXBsZXRlIHRoZSBhbmFseXNpcy5cIixcbiAgICAgICAgICAgIHNvdXJjZTogJ2Vycm9yJyxcbiAgICAgICAgICAgIHNlc3Npb25JZDogY2FzZURldGFpbHMuc2Vzc2lvbl9pZCB8fCBudWxsLFxuICAgICAgICAgICAgaXNDb2xsZWN0aW5nSW5mbzogdHJ1ZSxcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwOiAnYW5hbHlzaXNfcGVuZGluZydcbiAgICAgICAgICB9LCB7IHN0YXR1czogMjAwIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICByZXNwb25zZTogXCJJJ20gc29ycnksIGJ1dCB0aGUgY29ubmVjdGlvbiB0byB0aGUgTXVyZGVyIEFnZW50IGJhY2tlbmQgdGltZWQgb3V0LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyIG9yIGNoZWNrIGlmIHRoZSBiYWNrZW5kIHNlcnZpY2UgaXMgcnVubmluZy5cIixcbiAgICAgICAgICAgIHNvdXJjZTogJ2Vycm9yJyxcbiAgICAgICAgICAgIHNlc3Npb25JZDogbnVsbCxcbiAgICAgICAgICAgIGlzQ29sbGVjdGluZ0luZm86IGZhbHNlXG4gICAgICAgICAgfSwgeyBzdGF0dXM6IDIwMCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBGYWxsIGJhY2sgdG8gdGhlIG9yaWdpbmFsIHJvdXRlXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBmYWxsYmFja1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvbXVyZGVyLWFnZW50Jywge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHF1ZXN0aW9uLCBjb250ZXh0IH0pXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChmYWxsYmFja1Jlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZhbGxiYWNrUmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICByZXNwb25zZTogZGF0YS5yZXNwb25zZSxcbiAgICAgICAgICAgIHNvdXJjZTogJ2ZhbGxiYWNrJyxcbiAgICAgICAgICAgIHNlc3Npb25JZDogZGF0YS5zZXNzaW9uSWQgfHwgbnVsbCxcbiAgICAgICAgICAgIGlzQ29sbGVjdGluZ0luZm86IGRhdGEuaXNDb2xsZWN0aW5nSW5mbyB8fCBmYWxzZSxcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwOiBkYXRhLmN1cnJlbnRTdGVwIHx8IG51bGwsXG4gICAgICAgICAgICBjb2xsZWN0ZWREYXRhOiBkYXRhLmNvbGxlY3RlZERhdGEgfHwgbnVsbFxuICAgICAgICAgIH0sIHsgc3RhdHVzOiAyMDAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWxsYmFjayBNdXJkZXIgQWdlbnQgQVBJIGNhbGwgZmFpbGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGZhbGxiYWNrRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd2l0aCBmYWxsYmFjayBNdXJkZXIgQWdlbnQgQVBJIGNhbGw6JywgZmFsbGJhY2tFcnJvcik7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgcmVzcG9uc2U6IGBJJ20gc29ycnksIGJ1dCBJIGNvdWxkbid0IGNvbm5lY3QgdG8gdGhlIE11cmRlciBBZ2VudCBiYWNrZW5kLiBUaGUgZXJyb3Igd2FzOiAke2Vycm9yLm1lc3NhZ2V9LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyIG9yIGNoZWNrIGlmIHRoZSBiYWNrZW5kIHNlcnZpY2UgaXMgcnVubmluZy5gLFxuICAgICAgICAgIHNvdXJjZTogJ2Vycm9yJyxcbiAgICAgICAgICBzZXNzaW9uSWQ6IG51bGwsXG4gICAgICAgICAgaXNDb2xsZWN0aW5nSW5mbzogZmFsc2VcbiAgICAgICAgfSwgeyBzdGF0dXM6IDIwMCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIGRpcmVjdCBNdXJkZXIgQWdlbnQgcmVxdWVzdDonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHJlc3BvbnNlOiBgSSdtIHNvcnJ5LCBidXQgdGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgeW91ciByZXF1ZXN0OiAke2Vycm9yLm1lc3NhZ2V9LiBQbGVhc2UgdHJ5IGFnYWluLmAsXG4gICAgICBzb3VyY2U6ICdlcnJvcicsXG4gICAgICBzZXNzaW9uSWQ6IG51bGwsXG4gICAgICBpc0NvbGxlY3RpbmdJbmZvOiBmYWxzZVxuICAgIH0sIHsgc3RhdHVzOiAyMDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJNVVJERVJfQUdFTlRfQVBJX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19NVVJERVJfQUdFTlRfQVBJX1VSTCIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJxdWVzdGlvbiIsImVycm9yIiwic3RhdHVzIiwiY29udGV4dCIsInNlc3Npb25JZCIsImNvbnNvbGUiLCJsb2ciLCJjYXNlRGV0YWlscyIsImFkZGl0aW9uYWxfbm90ZXMiLCJzZXNzaW9uX2lkIiwiZm9yY2VfYW5hbHlzaXMiLCJyZXNldF9jb252ZXJzYXRpb24iLCJmb3JjZV9uZXdfc2Vzc2lvbiIsInRyaW0iLCJmb3JjZVJlc2V0IiwiY2FzZUlkIiwiY2FzZV9pZCIsImNhc2VOYW1lIiwiY2FzZV9uYW1lIiwiY2FzZVN0YXR1cyIsImNhc2Vfc3RhdHVzIiwiY2FzZVByaW9yaXR5IiwiY2FzZV9wcmlvcml0eSIsImFzc2lnbmVkVG8iLCJhc3NpZ25lZF90byIsImFzc2lnbmVkRGF0ZSIsImFzc2lnbmVkX2RhdGUiLCJsb2NhdGlvbiIsImNyaW1lRGF0ZSIsImRhdGVfb2ZfY3JpbWUiLCJjcmltZVRpbWUiLCJ0aW1lX29mX2NyaW1lIiwidmljdGltTmFtZSIsInZpY3RpbV9uYW1lIiwidmljdGltQWdlIiwidmljdGltX2FnZSIsInZpY3RpbUdlbmRlciIsInZpY3RpbV9nZW5kZXIiLCJjYXVzZU9mRGVhdGgiLCJjYXVzZV9vZl9kZWF0aCIsIndlYXBvblVzZWQiLCJ3ZWFwb25fdXNlZCIsImNyaW1lU2NlbmVEZXNjcmlwdGlvbiIsImNyaW1lX3NjZW5lX2Rlc2NyaXB0aW9uIiwid2l0bmVzc2VzIiwiZXZpZGVuY2UiLCJldmlkZW5jZV9mb3VuZCIsInN1c3BlY3RzIiwiY29sbGVjdGVkRGF0YSIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJjdXJyZW50U3RlcCIsImN1cnJlbnRfc3RlcCIsIkRhdGUiLCJub3ciLCJKU09OIiwic3RyaW5naWZ5IiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0Iiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJkYXRhIiwiY29sbGVjdGVkX2RhdGEiLCJzdWNjZXNzIiwiYW5hbHlzaXMiLCJzb3VyY2UiLCJpc0NvbGxlY3RpbmdJbmZvIiwiaXNfY29sbGVjdGluZ19pbmZvIiwibWVzc2FnZSIsInJlc3BvbnNlVGV4dCIsIm5hbWUiLCJpc0FuYWx5c2lzU3RlcCIsImtleXMiLCJsZW5ndGgiLCJmYWxsYmFja1Jlc3BvbnNlIiwiZmFsbGJhY2tFcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/murder-agent/direct/route.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmurder-agent%2Fdirect%2Froute&page=%2Fapi%2Fmurder-agent%2Fdirect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmurder-agent%2Fdirect%2Froute.ts&appDir=%2Fhome%2Fleojamescharles%2FDesktop%2Faijusticegrid%2Finvestigation-main_updated%2Finvestigation-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fleojamescharles%2FDesktop%2Faijusticegrid%2Finvestigation-main_updated%2Finvestigation-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();