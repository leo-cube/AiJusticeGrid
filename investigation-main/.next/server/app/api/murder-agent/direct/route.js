/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/murder-agent/direct/route";
exports.ids = ["app/api/murder-agent/direct/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmurder-agent%2Fdirect%2Froute&page=%2Fapi%2Fmurder-agent%2Fdirect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmurder-agent%2Fdirect%2Froute.ts&appDir=C%3A%5Cpython_programs%5CAIjusticegrid%5CAiJusticeGrid%5Cinvestigation-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cpython_programs%5CAIjusticegrid%5CAiJusticeGrid%5Cinvestigation-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmurder-agent%2Fdirect%2Froute&page=%2Fapi%2Fmurder-agent%2Fdirect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmurder-agent%2Fdirect%2Froute.ts&appDir=C%3A%5Cpython_programs%5CAIjusticegrid%5CAiJusticeGrid%5Cinvestigation-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cpython_programs%5CAIjusticegrid%5CAiJusticeGrid%5Cinvestigation-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_python_programs_AIjusticegrid_AiJusticeGrid_investigation_main_src_app_api_murder_agent_direct_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/murder-agent/direct/route.ts */ \"(rsc)/./src/app/api/murder-agent/direct/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/murder-agent/direct/route\",\n        pathname: \"/api/murder-agent/direct\",\n        filename: \"route\",\n        bundlePath: \"app/api/murder-agent/direct/route\"\n    },\n    resolvedPagePath: \"C:\\\\python_programs\\\\AIjusticegrid\\\\AiJusticeGrid\\\\investigation-main\\\\src\\\\app\\\\api\\\\murder-agent\\\\direct\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_python_programs_AIjusticegrid_AiJusticeGrid_investigation_main_src_app_api_murder_agent_direct_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZtdXJkZXItYWdlbnQlMkZkaXJlY3QlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm11cmRlci1hZ2VudCUyRmRpcmVjdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm11cmRlci1hZ2VudCUyRmRpcmVjdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDcHl0aG9uX3Byb2dyYW1zJTVDQUlqdXN0aWNlZ3JpZCU1Q0FpSnVzdGljZUdyaWQlNUNpbnZlc3RpZ2F0aW9uLW1haW4lNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNweXRob25fcHJvZ3JhbXMlNUNBSWp1c3RpY2VncmlkJTVDQWlKdXN0aWNlR3JpZCU1Q2ludmVzdGlnYXRpb24tbWFpbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDb0U7QUFDako7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXHB5dGhvbl9wcm9ncmFtc1xcXFxBSWp1c3RpY2VncmlkXFxcXEFpSnVzdGljZUdyaWRcXFxcaW52ZXN0aWdhdGlvbi1tYWluXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG11cmRlci1hZ2VudFxcXFxkaXJlY3RcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL211cmRlci1hZ2VudC9kaXJlY3Qvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9tdXJkZXItYWdlbnQvZGlyZWN0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9tdXJkZXItYWdlbnQvZGlyZWN0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxccHl0aG9uX3Byb2dyYW1zXFxcXEFJanVzdGljZWdyaWRcXFxcQWlKdXN0aWNlR3JpZFxcXFxpbnZlc3RpZ2F0aW9uLW1haW5cXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcbXVyZGVyLWFnZW50XFxcXGRpcmVjdFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmurder-agent%2Fdirect%2Froute&page=%2Fapi%2Fmurder-agent%2Fdirect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmurder-agent%2Fdirect%2Froute.ts&appDir=C%3A%5Cpython_programs%5CAIjusticegrid%5CAiJusticeGrid%5Cinvestigation-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cpython_programs%5CAIjusticegrid%5CAiJusticeGrid%5Cinvestigation-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/murder-agent/direct/route.ts":
/*!**************************************************!*\
  !*** ./src/app/api/murder-agent/direct/route.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n// Murder Agent API URL\nconst MURDER_AGENT_API_URL = process.env.NEXT_PUBLIC_MURDER_AGENT_API_URL || 'http://localhost:5000/api/augment/murder';\n/**\r\n * Direct proxy to the Murder Agent backend\r\n * This avoids CORS issues when calling from the frontend\r\n */ async function POST(request) {\n    try {\n        const body = await request.json();\n        // Validate required fields\n        if (!body.question) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Missing required field: question'\n            }, {\n                status: 400\n            });\n        }\n        const question = body.question;\n        const context = body.context;\n        // Get the session ID if available\n        let sessionId = body.sessionId;\n        // Check if the sessionId is \"new session\" (a string literal) and set it to null\n        if (sessionId === 'new session') {\n            console.log('Received \"new session\" as session ID, setting to null to create a new session');\n            sessionId = null;\n        }\n        console.log('Murder Agent API request:', {\n            question,\n            sessionId: sessionId || 'new session',\n            context: context ? 'provided' : 'not provided'\n        });\n        // Log the full session ID for debugging\n        if (sessionId) {\n            console.log('Using session ID:', sessionId);\n        } else {\n            console.log('No session ID provided, will create a new session');\n        }\n        // Prepare case details for the Murder Agent\n        const caseDetails = {\n            question: question,\n            additional_notes: question,\n            session_id: sessionId || null\n        };\n        // Special handling for different commands\n        if (question === 'CONTINUE_ANALYSIS') {\n            console.log('Detected CONTINUE_ANALYSIS command, setting special flags');\n            caseDetails.question = 'analyze';\n            caseDetails.additional_notes = 'Please complete the analysis';\n            caseDetails.force_analysis = true;\n        } else if (question === 'FORCE_NEW_SESSION') {\n            // Force a completely new session\n            console.log('Detected FORCE_NEW_SESSION command, forcing a new session');\n            caseDetails.question = 'initialize';\n            caseDetails.additional_notes = 'Please start a new conversation';\n            caseDetails.reset_conversation = true;\n            caseDetails.force_new_session = true;\n            // Clear the session ID to ensure a new one is created\n            caseDetails.session_id = null;\n            sessionId = null;\n        } else if (question === '' || !question.trim()) {\n            // If no question is provided, this is likely an initialization request\n            console.log('Empty question detected, treating as initialization request');\n            caseDetails.question = 'initialize';\n            caseDetails.additional_notes = 'Please start a new conversation';\n            caseDetails.reset_conversation = true;\n        }\n        // If forceReset is true, ensure we're creating a new session\n        if (body.forceReset) {\n            console.log('forceReset flag detected, forcing a new session');\n            caseDetails.reset_conversation = true;\n            caseDetails.force_new_session = true;\n            // Clear the session ID to ensure a new one is created\n            caseDetails.session_id = null;\n            sessionId = null;\n        }\n        // Make sure we're explicitly setting the session_id in the request\n        if (sessionId) {\n            console.log('Setting session_id in request:', sessionId);\n            caseDetails.session_id = sessionId;\n        } else {\n            // If no session ID is provided, check if there's one in the context\n            if (context?.sessionId) {\n                console.log('Using session ID from context:', context.sessionId);\n                caseDetails.session_id = context.sessionId;\n            }\n        }\n        // Add case details from context if available\n        if (context) {\n            if (context.caseId) caseDetails.case_id = context.caseId;\n            if (context.caseName) caseDetails.case_name = context.caseName;\n            if (context.caseStatus) caseDetails.case_status = context.caseStatus;\n            if (context.casePriority) caseDetails.case_priority = context.casePriority;\n            if (context.assignedTo) caseDetails.assigned_to = context.assignedTo;\n            if (context.assignedDate) caseDetails.assigned_date = context.assignedDate;\n            if (context.location) caseDetails.location = context.location;\n            if (context.crimeDate) caseDetails.date_of_crime = context.crimeDate;\n            if (context.crimeTime) caseDetails.time_of_crime = context.crimeTime;\n            if (context.victimName) caseDetails.victim_name = context.victimName;\n            if (context.victimAge) caseDetails.victim_age = context.victimAge;\n            if (context.victimGender) caseDetails.victim_gender = context.victimGender;\n            if (context.causeOfDeath) caseDetails.cause_of_death = context.causeOfDeath;\n            if (context.weaponUsed) caseDetails.weapon_used = context.weaponUsed;\n            if (context.crimeSceneDescription) caseDetails.crime_scene_description = context.crimeSceneDescription;\n            if (context.witnesses) caseDetails.witnesses = context.witnesses;\n            if (context.evidence) caseDetails.evidence_found = context.evidence;\n            if (context.suspects) caseDetails.suspects = context.suspects;\n            // Also include any collected data from previous interactions\n            if (context.collectedData) {\n                // Merge collected data with case details, prioritizing collected data\n                Object.entries(context.collectedData).forEach(([key, value])=>{\n                    if (value) {\n                        caseDetails[key] = value;\n                    }\n                });\n            }\n            // Do NOT include the current step from context for the first message\n            // This allows the backend to properly handle the case ID\n            // Only include it for subsequent messages\n            if (context.currentStep && context.currentStep !== 'greeting' && context.currentStep !== 'case_id') {\n                caseDetails.current_step = context.currentStep;\n                console.log('Including current step in request:', context.currentStep);\n            } else {\n                console.log('Not including current step in request to allow proper case ID handling');\n            }\n        }\n        // Only generate a case ID if we're starting a new conversation and no case ID is provided\n        // Let the backend handle the first user input as the case ID\n        if (!caseDetails.case_id && (caseDetails.force_new_session || caseDetails.reset_conversation)) {\n            // Generate a case ID only for new sessions\n            caseDetails.case_id = `case_${Date.now()}`;\n            console.log('Generated case ID for new session:', caseDetails.case_id);\n        }\n        // Important: Do NOT set case_id for regular messages\n        // The backend will handle the first user message as the case ID\n        console.log('Sending case details to Murder Agent:', JSON.stringify(caseDetails));\n        console.log('Calling Murder Agent backend directly from Next.js API route:', MURDER_AGENT_API_URL);\n        // Set a timeout for the API call (60 seconds for analysis generation)\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), 60000); // 60 second timeout\n        try {\n            // Call the Murder Agent API directly\n            const response = await fetch(MURDER_AGENT_API_URL, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(caseDetails),\n                signal: controller.signal\n            });\n            // Clear the timeout\n            clearTimeout(timeoutId);\n            if (!response.ok) {\n                throw new Error(`Murder Agent API error: ${response.statusText}`);\n            }\n            const data = await response.json();\n            console.log('Murder Agent API response:', data);\n            // Log the full response for debugging\n            console.log('Full Murder Agent API response:', JSON.stringify(data));\n            // Log the collected data for debugging\n            if (data.data && data.data.collected_data) {\n                console.log('Collected data from Murder Agent:', data.data.collected_data);\n            }\n            // Log the current step for debugging\n            if (data.data && data.data.current_step) {\n                console.log('Current step from Murder Agent:', data.data.current_step);\n            }\n            // Check if the response has the expected format\n            if (data.success && data.data && data.data.analysis) {\n                // Return the analysis with a marker indicating it's from the live backend\n                console.log('Returning session ID in response:', data.session_id);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: data.data.analysis,\n                    source: 'direct-backend',\n                    sessionId: data.session_id || null,\n                    isCollectingInfo: data.data.is_collecting_info || false,\n                    currentStep: data.data.current_step || null,\n                    collectedData: data.data.collected_data || {}\n                }, {\n                    status: 200\n                });\n            } else if (data.data?.analysis) {\n                // Alternative format\n                console.log('Returning session ID in response (alternative format):', data.session_id);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: data.data.analysis,\n                    source: 'direct-backend',\n                    sessionId: data.session_id || null,\n                    isCollectingInfo: data.data.is_collecting_info || false,\n                    currentStep: data.data.current_step || null,\n                    collectedData: data.data.collected_data || {}\n                }, {\n                    status: 200\n                });\n            } else if (data.success && data.message) {\n                // Simple success message\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: data.message,\n                    source: 'direct-backend',\n                    sessionId: data.session_id || null,\n                    isCollectingInfo: true,\n                    currentStep: 'greeting'\n                }, {\n                    status: 200\n                });\n            } else if (data.response) {\n                // Simple response format\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: data.response,\n                    source: 'direct-backend',\n                    sessionId: data.session_id || null,\n                    isCollectingInfo: true,\n                    currentStep: 'greeting'\n                }, {\n                    status: 200\n                });\n            } else {\n                // Try to extract information from the response even if it doesn't match expected formats\n                console.log('Attempting to extract information from non-standard response format:', data);\n                // Check if there's any session_id in the response\n                const sessionId = data.session_id || null;\n                // Check if there's any message or text that could be used as a response\n                let responseText = null;\n                if (data.data && typeof data.data === 'object') {\n                    responseText = data.data.analysis || data.data.message || data.data.response || null;\n                }\n                if (!responseText && typeof data.message === 'string') {\n                    responseText = data.message;\n                }\n                if (!responseText && typeof data.response === 'string') {\n                    responseText = data.response;\n                }\n                // If we found something usable, return it\n                if (responseText) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        response: responseText,\n                        source: 'direct-backend',\n                        sessionId: sessionId,\n                        isCollectingInfo: true,\n                        currentStep: 'greeting'\n                    }, {\n                        status: 200\n                    });\n                }\n                console.error('Invalid response format from Murder Agent API:', data);\n                throw new Error('Invalid response format from Murder Agent API');\n            }\n        } catch (error) {\n            // Clear the timeout if it hasn't fired yet\n            clearTimeout(timeoutId);\n            console.error('Error calling Murder Agent API directly:', error);\n            // If the error is due to the timeout, return a specific message\n            if (error.name === 'AbortError') {\n                // Check if we're at the analysis step (final step)\n                const isAnalysisStep = caseDetails.current_step === 'additional_notes' || caseDetails.collected_data && Object.keys(caseDetails.collected_data).length > 5;\n                if (isAnalysisStep) {\n                    console.log('Timeout occurred during analysis generation, returning a helpful message');\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        response: \"I'm generating a detailed analysis of your case, but it's taking longer than expected. This is normal for complex cases. Please try sending 'continue' or 'analyze' to complete the analysis.\",\n                        source: 'error',\n                        sessionId: caseDetails.session_id || null,\n                        isCollectingInfo: true,\n                        currentStep: 'analysis_pending'\n                    }, {\n                        status: 200\n                    });\n                } else {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        response: \"I'm sorry, but the connection to the Murder Agent backend timed out. Please try again later or check if the backend service is running.\",\n                        source: 'error',\n                        sessionId: null,\n                        isCollectingInfo: false\n                    }, {\n                        status: 200\n                    });\n                }\n            }\n            // Fall back to the original route\n            try {\n                const fallbackResponse = await fetch('/api/murder-agent', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        question,\n                        context\n                    })\n                });\n                if (fallbackResponse.ok) {\n                    const data = await fallbackResponse.json();\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        response: data.response,\n                        source: 'fallback',\n                        sessionId: data.sessionId || null,\n                        isCollectingInfo: data.isCollectingInfo || false,\n                        currentStep: data.currentStep || null,\n                        collectedData: data.collectedData || null\n                    }, {\n                        status: 200\n                    });\n                } else {\n                    throw new Error('Fallback Murder Agent API call failed');\n                }\n            } catch (fallbackError) {\n                console.error('Error with fallback Murder Agent API call:', fallbackError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: `I'm sorry, but I couldn't connect to the Murder Agent backend. The error was: ${error.message}. Please try again later or check if the backend service is running.`,\n                    source: 'error',\n                    sessionId: null,\n                    isCollectingInfo: false\n                }, {\n                    status: 200\n                });\n            }\n        }\n    } catch (error) {\n        console.error('Error processing direct Murder Agent request:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            response: `I'm sorry, but there was an error processing your request: ${error.message}. Please try again.`,\n            source: 'error',\n            sessionId: null,\n            isCollectingInfo: false\n        }, {\n            status: 200\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tdXJkZXItYWdlbnQvZGlyZWN0L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJDO0FBRzNDLHVCQUF1QjtBQUN2QixNQUFNQyx1QkFBdUJDLFFBQVFDLEdBQUcsQ0FBQ0MsZ0NBQWdDLElBQUk7QUFFN0U7OztDQUdDLEdBQ00sZUFBZUMsS0FBS0MsT0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUQsUUFBUUUsSUFBSTtRQUUvQiwyQkFBMkI7UUFDM0IsSUFBSSxDQUFDRCxLQUFLRSxRQUFRLEVBQUU7WUFDbEIsT0FBT1QscURBQVlBLENBQUNRLElBQUksQ0FDdEI7Z0JBQUVFLE9BQU87WUFBbUMsR0FDNUM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1GLFdBQVdGLEtBQUtFLFFBQVE7UUFDOUIsTUFBTUcsVUFBVUwsS0FBS0ssT0FBTztRQUU1QixrQ0FBa0M7UUFDbEMsSUFBSUMsWUFBWU4sS0FBS00sU0FBUztRQUU5QixnRkFBZ0Y7UUFDaEYsSUFBSUEsY0FBYyxlQUFlO1lBQy9CQyxRQUFRQyxHQUFHLENBQUM7WUFDWkYsWUFBWTtRQUNkO1FBRUFDLFFBQVFDLEdBQUcsQ0FBQyw2QkFBNkI7WUFDdkNOO1lBQ0FJLFdBQVdBLGFBQWE7WUFDeEJELFNBQVNBLFVBQVUsYUFBYTtRQUNsQztRQUVBLHdDQUF3QztRQUN4QyxJQUFJQyxXQUFXO1lBQ2JDLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJGO1FBQ25DLE9BQU87WUFDTEMsUUFBUUMsR0FBRyxDQUFDO1FBQ2Q7UUFFQSw0Q0FBNEM7UUFDNUMsTUFBTUMsY0FBbUM7WUFDdkNQLFVBQVVBO1lBQ1ZRLGtCQUFrQlI7WUFDbEJTLFlBQVlMLGFBQWE7UUFDM0I7UUFFQSwwQ0FBMEM7UUFDMUMsSUFBSUosYUFBYSxxQkFBcUI7WUFDcENLLFFBQVFDLEdBQUcsQ0FBQztZQUNaQyxZQUFZUCxRQUFRLEdBQUc7WUFDdkJPLFlBQVlDLGdCQUFnQixH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T0FBT1IscURBQVlBLENBQUNRLElBQUksQ0FBQzt3QkFDdkJrRSxVQUFVUyxLQUFLVCxRQUFRO3dCQUN2QmEsUUFBUTt3QkFDUjFFLFdBQVdzRSxLQUFLdEUsU0FBUyxJQUFJO3dCQUM3QjJFLGtCQUFrQkwsS0FBS0ssZ0JBQWdCLElBQUk7d0JBQzNDekIsYUFBYW9CLEtBQUtwQixXQUFXLElBQUk7d0JBQ2pDTixlQUFlMEIsS0FBSzFCLGFBQWEsSUFBSTtvQkFDdkMsR0FBRzt3QkFBRTlDLFFBQVE7b0JBQUk7Z0JBQ25CLE9BQU87b0JBQ0wsTUFBTSxJQUFJc0UsTUFBTTtnQkFDbEI7WUFDRixFQUFFLE9BQU9nQixlQUFlO2dCQUN0Qm5GLFFBQVFKLEtBQUssQ0FBQyw4Q0FBOEN1RjtnQkFDNUQsT0FBT2pHLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7b0JBQ3ZCa0UsVUFBVSxDQUFDLDhFQUE4RSxFQUFFaEUsTUFBTWdGLE9BQU8sQ0FBQyxvRUFBb0UsQ0FBQztvQkFDOUtILFFBQVE7b0JBQ1IxRSxXQUFXO29CQUNYMkUsa0JBQWtCO2dCQUNwQixHQUFHO29CQUFFN0UsUUFBUTtnQkFBSTtZQUNuQjtRQUNGO0lBQ0YsRUFBRSxPQUFPRCxPQUFZO1FBQ25CSSxRQUFRSixLQUFLLENBQUMsaURBQWlEQTtRQUMvRCxPQUFPVixxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO1lBQ3ZCa0UsVUFBVSxDQUFDLDJEQUEyRCxFQUFFaEUsTUFBTWdGLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztZQUMxR0gsUUFBUTtZQUNSMUUsV0FBVztZQUNYMkUsa0JBQWtCO1FBQ3BCLEdBQUc7WUFBRTdFLFFBQVE7UUFBSTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJDOlxccHl0aG9uX3Byb2dyYW1zXFxBSWp1c3RpY2VncmlkXFxBaUp1c3RpY2VHcmlkXFxpbnZlc3RpZ2F0aW9uLW1haW5cXHNyY1xcYXBwXFxhcGlcXG11cmRlci1hZ2VudFxcZGlyZWN0XFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IENoYXRDb250ZXh0IH0gZnJvbSAnQC9hcHAvdHlwZXMnO1xyXG5cclxuLy8gTXVyZGVyIEFnZW50IEFQSSBVUkxcclxuY29uc3QgTVVSREVSX0FHRU5UX0FQSV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19NVVJERVJfQUdFTlRfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2FwaS9hdWdtZW50L211cmRlcic7XHJcblxyXG4vKipcclxuICogRGlyZWN0IHByb3h5IHRvIHRoZSBNdXJkZXIgQWdlbnQgYmFja2VuZFxyXG4gKiBUaGlzIGF2b2lkcyBDT1JTIGlzc3VlcyB3aGVuIGNhbGxpbmcgZnJvbSB0aGUgZnJvbnRlbmRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xyXG4gICAgaWYgKCFib2R5LnF1ZXN0aW9uKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZDogcXVlc3Rpb24nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcXVlc3Rpb24gPSBib2R5LnF1ZXN0aW9uO1xyXG4gICAgY29uc3QgY29udGV4dCA9IGJvZHkuY29udGV4dCBhcyBDaGF0Q29udGV4dDtcclxuXHJcbiAgICAvLyBHZXQgdGhlIHNlc3Npb24gSUQgaWYgYXZhaWxhYmxlXHJcbiAgICBsZXQgc2Vzc2lvbklkID0gYm9keS5zZXNzaW9uSWQ7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHNlc3Npb25JZCBpcyBcIm5ldyBzZXNzaW9uXCIgKGEgc3RyaW5nIGxpdGVyYWwpIGFuZCBzZXQgaXQgdG8gbnVsbFxyXG4gICAgaWYgKHNlc3Npb25JZCA9PT0gJ25ldyBzZXNzaW9uJykge1xyXG4gICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgXCJuZXcgc2Vzc2lvblwiIGFzIHNlc3Npb24gSUQsIHNldHRpbmcgdG8gbnVsbCB0byBjcmVhdGUgYSBuZXcgc2Vzc2lvbicpO1xyXG4gICAgICBzZXNzaW9uSWQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdNdXJkZXIgQWdlbnQgQVBJIHJlcXVlc3Q6Jywge1xyXG4gICAgICBxdWVzdGlvbixcclxuICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWQgfHwgJ25ldyBzZXNzaW9uJyxcclxuICAgICAgY29udGV4dDogY29udGV4dCA/ICdwcm92aWRlZCcgOiAnbm90IHByb3ZpZGVkJ1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gTG9nIHRoZSBmdWxsIHNlc3Npb24gSUQgZm9yIGRlYnVnZ2luZ1xyXG4gICAgaWYgKHNlc3Npb25JZCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnVXNpbmcgc2Vzc2lvbiBJRDonLCBzZXNzaW9uSWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ05vIHNlc3Npb24gSUQgcHJvdmlkZWQsIHdpbGwgY3JlYXRlIGEgbmV3IHNlc3Npb24nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQcmVwYXJlIGNhc2UgZGV0YWlscyBmb3IgdGhlIE11cmRlciBBZ2VudFxyXG4gICAgY29uc3QgY2FzZURldGFpbHM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7XHJcbiAgICAgIHF1ZXN0aW9uOiBxdWVzdGlvbixcclxuICAgICAgYWRkaXRpb25hbF9ub3RlczogcXVlc3Rpb24sXHJcbiAgICAgIHNlc3Npb25faWQ6IHNlc3Npb25JZCB8fCBudWxsLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBkaWZmZXJlbnQgY29tbWFuZHNcclxuICAgIGlmIChxdWVzdGlvbiA9PT0gJ0NPTlRJTlVFX0FOQUxZU0lTJykge1xyXG4gICAgICBjb25zb2xlLmxvZygnRGV0ZWN0ZWQgQ09OVElOVUVfQU5BTFlTSVMgY29tbWFuZCwgc2V0dGluZyBzcGVjaWFsIGZsYWdzJyk7XHJcbiAgICAgIGNhc2VEZXRhaWxzLnF1ZXN0aW9uID0gJ2FuYWx5emUnO1xyXG4gICAgICBjYXNlRGV0YWlscy5hZGRpdGlvbmFsX25vdGVzID0gJ1BsZWFzZSBjb21wbGV0ZSB0aGUgYW5hbHlzaXMnO1xyXG4gICAgICBjYXNlRGV0YWlscy5mb3JjZV9hbmFseXNpcyA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKHF1ZXN0aW9uID09PSAnRk9SQ0VfTkVXX1NFU1NJT04nKSB7XHJcbiAgICAgIC8vIEZvcmNlIGEgY29tcGxldGVseSBuZXcgc2Vzc2lvblxyXG4gICAgICBjb25zb2xlLmxvZygnRGV0ZWN0ZWQgRk9SQ0VfTkVXX1NFU1NJT04gY29tbWFuZCwgZm9yY2luZyBhIG5ldyBzZXNzaW9uJyk7XHJcbiAgICAgIGNhc2VEZXRhaWxzLnF1ZXN0aW9uID0gJ2luaXRpYWxpemUnO1xyXG4gICAgICBjYXNlRGV0YWlscy5hZGRpdGlvbmFsX25vdGVzID0gJ1BsZWFzZSBzdGFydCBhIG5ldyBjb252ZXJzYXRpb24nO1xyXG4gICAgICBjYXNlRGV0YWlscy5yZXNldF9jb252ZXJzYXRpb24gPSB0cnVlO1xyXG4gICAgICBjYXNlRGV0YWlscy5mb3JjZV9uZXdfc2Vzc2lvbiA9IHRydWU7XHJcblxyXG4gICAgICAvLyBDbGVhciB0aGUgc2Vzc2lvbiBJRCB0byBlbnN1cmUgYSBuZXcgb25lIGlzIGNyZWF0ZWRcclxuICAgICAgY2FzZURldGFpbHMuc2Vzc2lvbl9pZCA9IG51bGw7XHJcbiAgICAgIHNlc3Npb25JZCA9IG51bGw7XHJcbiAgICB9IGVsc2UgaWYgKHF1ZXN0aW9uID09PSAnJyB8fCAhcXVlc3Rpb24udHJpbSgpKSB7XHJcbiAgICAgIC8vIElmIG5vIHF1ZXN0aW9uIGlzIHByb3ZpZGVkLCB0aGlzIGlzIGxpa2VseSBhbiBpbml0aWFsaXphdGlvbiByZXF1ZXN0XHJcbiAgICAgIGNvbnNvbGUubG9nKCdFbXB0eSBxdWVzdGlvbiBkZXRlY3RlZCwgdHJlYXRpbmcgYXMgaW5pdGlhbGl6YXRpb24gcmVxdWVzdCcpO1xyXG4gICAgICBjYXNlRGV0YWlscy5xdWVzdGlvbiA9ICdpbml0aWFsaXplJztcclxuICAgICAgY2FzZURldGFpbHMuYWRkaXRpb25hbF9ub3RlcyA9ICdQbGVhc2Ugc3RhcnQgYSBuZXcgY29udmVyc2F0aW9uJztcclxuICAgICAgY2FzZURldGFpbHMucmVzZXRfY29udmVyc2F0aW9uID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBmb3JjZVJlc2V0IGlzIHRydWUsIGVuc3VyZSB3ZSdyZSBjcmVhdGluZyBhIG5ldyBzZXNzaW9uXHJcbiAgICBpZiAoYm9keS5mb3JjZVJlc2V0KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdmb3JjZVJlc2V0IGZsYWcgZGV0ZWN0ZWQsIGZvcmNpbmcgYSBuZXcgc2Vzc2lvbicpO1xyXG4gICAgICBjYXNlRGV0YWlscy5yZXNldF9jb252ZXJzYXRpb24gPSB0cnVlO1xyXG4gICAgICBjYXNlRGV0YWlscy5mb3JjZV9uZXdfc2Vzc2lvbiA9IHRydWU7XHJcblxyXG4gICAgICAvLyBDbGVhciB0aGUgc2Vzc2lvbiBJRCB0byBlbnN1cmUgYSBuZXcgb25lIGlzIGNyZWF0ZWRcclxuICAgICAgY2FzZURldGFpbHMuc2Vzc2lvbl9pZCA9IG51bGw7XHJcbiAgICAgIHNlc3Npb25JZCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWFrZSBzdXJlIHdlJ3JlIGV4cGxpY2l0bHkgc2V0dGluZyB0aGUgc2Vzc2lvbl9pZCBpbiB0aGUgcmVxdWVzdFxyXG4gICAgaWYgKHNlc3Npb25JZCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnU2V0dGluZyBzZXNzaW9uX2lkIGluIHJlcXVlc3Q6Jywgc2Vzc2lvbklkKTtcclxuICAgICAgY2FzZURldGFpbHMuc2Vzc2lvbl9pZCA9IHNlc3Npb25JZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIElmIG5vIHNlc3Npb24gSUQgaXMgcHJvdmlkZWQsIGNoZWNrIGlmIHRoZXJlJ3Mgb25lIGluIHRoZSBjb250ZXh0XHJcbiAgICAgIGlmIChjb250ZXh0Py5zZXNzaW9uSWQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXNpbmcgc2Vzc2lvbiBJRCBmcm9tIGNvbnRleHQ6JywgY29udGV4dC5zZXNzaW9uSWQpO1xyXG4gICAgICAgIGNhc2VEZXRhaWxzLnNlc3Npb25faWQgPSBjb250ZXh0LnNlc3Npb25JZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCBjYXNlIGRldGFpbHMgZnJvbSBjb250ZXh0IGlmIGF2YWlsYWJsZVxyXG4gICAgaWYgKGNvbnRleHQpIHtcclxuICAgICAgaWYgKGNvbnRleHQuY2FzZUlkKSBjYXNlRGV0YWlscy5jYXNlX2lkID0gY29udGV4dC5jYXNlSWQ7XHJcbiAgICAgIGlmIChjb250ZXh0LmNhc2VOYW1lKSBjYXNlRGV0YWlscy5jYXNlX25hbWUgPSBjb250ZXh0LmNhc2VOYW1lO1xyXG4gICAgICBpZiAoY29udGV4dC5jYXNlU3RhdHVzKSBjYXNlRGV0YWlscy5jYXNlX3N0YXR1cyA9IGNvbnRleHQuY2FzZVN0YXR1cztcclxuICAgICAgaWYgKGNvbnRleHQuY2FzZVByaW9yaXR5KSBjYXNlRGV0YWlscy5jYXNlX3ByaW9yaXR5ID0gY29udGV4dC5jYXNlUHJpb3JpdHk7XHJcbiAgICAgIGlmIChjb250ZXh0LmFzc2lnbmVkVG8pIGNhc2VEZXRhaWxzLmFzc2lnbmVkX3RvID0gY29udGV4dC5hc3NpZ25lZFRvO1xyXG4gICAgICBpZiAoY29udGV4dC5hc3NpZ25lZERhdGUpIGNhc2VEZXRhaWxzLmFzc2lnbmVkX2RhdGUgPSBjb250ZXh0LmFzc2lnbmVkRGF0ZTtcclxuICAgICAgaWYgKGNvbnRleHQubG9jYXRpb24pIGNhc2VEZXRhaWxzLmxvY2F0aW9uID0gY29udGV4dC5sb2NhdGlvbjtcclxuICAgICAgaWYgKGNvbnRleHQuY3JpbWVEYXRlKSBjYXNlRGV0YWlscy5kYXRlX29mX2NyaW1lID0gY29udGV4dC5jcmltZURhdGU7XHJcbiAgICAgIGlmIChjb250ZXh0LmNyaW1lVGltZSkgY2FzZURldGFpbHMudGltZV9vZl9jcmltZSA9IGNvbnRleHQuY3JpbWVUaW1lO1xyXG4gICAgICBpZiAoY29udGV4dC52aWN0aW1OYW1lKSBjYXNlRGV0YWlscy52aWN0aW1fbmFtZSA9IGNvbnRleHQudmljdGltTmFtZTtcclxuICAgICAgaWYgKGNvbnRleHQudmljdGltQWdlKSBjYXNlRGV0YWlscy52aWN0aW1fYWdlID0gY29udGV4dC52aWN0aW1BZ2U7XHJcbiAgICAgIGlmIChjb250ZXh0LnZpY3RpbUdlbmRlcikgY2FzZURldGFpbHMudmljdGltX2dlbmRlciA9IGNvbnRleHQudmljdGltR2VuZGVyO1xyXG4gICAgICBpZiAoY29udGV4dC5jYXVzZU9mRGVhdGgpIGNhc2VEZXRhaWxzLmNhdXNlX29mX2RlYXRoID0gY29udGV4dC5jYXVzZU9mRGVhdGg7XHJcbiAgICAgIGlmIChjb250ZXh0LndlYXBvblVzZWQpIGNhc2VEZXRhaWxzLndlYXBvbl91c2VkID0gY29udGV4dC53ZWFwb25Vc2VkO1xyXG4gICAgICBpZiAoY29udGV4dC5jcmltZVNjZW5lRGVzY3JpcHRpb24pIGNhc2VEZXRhaWxzLmNyaW1lX3NjZW5lX2Rlc2NyaXB0aW9uID0gY29udGV4dC5jcmltZVNjZW5lRGVzY3JpcHRpb247XHJcbiAgICAgIGlmIChjb250ZXh0LndpdG5lc3NlcykgY2FzZURldGFpbHMud2l0bmVzc2VzID0gY29udGV4dC53aXRuZXNzZXM7XHJcbiAgICAgIGlmIChjb250ZXh0LmV2aWRlbmNlKSBjYXNlRGV0YWlscy5ldmlkZW5jZV9mb3VuZCA9IGNvbnRleHQuZXZpZGVuY2U7XHJcbiAgICAgIGlmIChjb250ZXh0LnN1c3BlY3RzKSBjYXNlRGV0YWlscy5zdXNwZWN0cyA9IGNvbnRleHQuc3VzcGVjdHM7XHJcblxyXG4gICAgICAvLyBBbHNvIGluY2x1ZGUgYW55IGNvbGxlY3RlZCBkYXRhIGZyb20gcHJldmlvdXMgaW50ZXJhY3Rpb25zXHJcbiAgICAgIGlmIChjb250ZXh0LmNvbGxlY3RlZERhdGEpIHtcclxuICAgICAgICAvLyBNZXJnZSBjb2xsZWN0ZWQgZGF0YSB3aXRoIGNhc2UgZGV0YWlscywgcHJpb3JpdGl6aW5nIGNvbGxlY3RlZCBkYXRhXHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoY29udGV4dC5jb2xsZWN0ZWREYXRhKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcclxuICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlRGV0YWlsc1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIERvIE5PVCBpbmNsdWRlIHRoZSBjdXJyZW50IHN0ZXAgZnJvbSBjb250ZXh0IGZvciB0aGUgZmlyc3QgbWVzc2FnZVxyXG4gICAgICAvLyBUaGlzIGFsbG93cyB0aGUgYmFja2VuZCB0byBwcm9wZXJseSBoYW5kbGUgdGhlIGNhc2UgSURcclxuICAgICAgLy8gT25seSBpbmNsdWRlIGl0IGZvciBzdWJzZXF1ZW50IG1lc3NhZ2VzXHJcbiAgICAgIGlmIChjb250ZXh0LmN1cnJlbnRTdGVwICYmIGNvbnRleHQuY3VycmVudFN0ZXAgIT09ICdncmVldGluZycgJiYgY29udGV4dC5jdXJyZW50U3RlcCAhPT0gJ2Nhc2VfaWQnKSB7XHJcbiAgICAgICAgY2FzZURldGFpbHMuY3VycmVudF9zdGVwID0gY29udGV4dC5jdXJyZW50U3RlcDtcclxuICAgICAgICBjb25zb2xlLmxvZygnSW5jbHVkaW5nIGN1cnJlbnQgc3RlcCBpbiByZXF1ZXN0OicsIGNvbnRleHQuY3VycmVudFN0ZXApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdOb3QgaW5jbHVkaW5nIGN1cnJlbnQgc3RlcCBpbiByZXF1ZXN0IHRvIGFsbG93IHByb3BlciBjYXNlIElEIGhhbmRsaW5nJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBPbmx5IGdlbmVyYXRlIGEgY2FzZSBJRCBpZiB3ZSdyZSBzdGFydGluZyBhIG5ldyBjb252ZXJzYXRpb24gYW5kIG5vIGNhc2UgSUQgaXMgcHJvdmlkZWRcclxuICAgIC8vIExldCB0aGUgYmFja2VuZCBoYW5kbGUgdGhlIGZpcnN0IHVzZXIgaW5wdXQgYXMgdGhlIGNhc2UgSURcclxuICAgIGlmICghY2FzZURldGFpbHMuY2FzZV9pZCAmJiAoY2FzZURldGFpbHMuZm9yY2VfbmV3X3Nlc3Npb24gfHwgY2FzZURldGFpbHMucmVzZXRfY29udmVyc2F0aW9uKSkge1xyXG4gICAgICAvLyBHZW5lcmF0ZSBhIGNhc2UgSUQgb25seSBmb3IgbmV3IHNlc3Npb25zXHJcbiAgICAgIGNhc2VEZXRhaWxzLmNhc2VfaWQgPSBgY2FzZV8ke0RhdGUubm93KCl9YDtcclxuICAgICAgY29uc29sZS5sb2coJ0dlbmVyYXRlZCBjYXNlIElEIGZvciBuZXcgc2Vzc2lvbjonLCBjYXNlRGV0YWlscy5jYXNlX2lkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbXBvcnRhbnQ6IERvIE5PVCBzZXQgY2FzZV9pZCBmb3IgcmVndWxhciBtZXNzYWdlc1xyXG4gICAgLy8gVGhlIGJhY2tlbmQgd2lsbCBoYW5kbGUgdGhlIGZpcnN0IHVzZXIgbWVzc2FnZSBhcyB0aGUgY2FzZSBJRFxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdTZW5kaW5nIGNhc2UgZGV0YWlscyB0byBNdXJkZXIgQWdlbnQ6JywgSlNPTi5zdHJpbmdpZnkoY2FzZURldGFpbHMpKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnQ2FsbGluZyBNdXJkZXIgQWdlbnQgYmFja2VuZCBkaXJlY3RseSBmcm9tIE5leHQuanMgQVBJIHJvdXRlOicsIE1VUkRFUl9BR0VOVF9BUElfVVJMKTtcclxuXHJcbiAgICAvLyBTZXQgYSB0aW1lb3V0IGZvciB0aGUgQVBJIGNhbGwgKDYwIHNlY29uZHMgZm9yIGFuYWx5c2lzIGdlbmVyYXRpb24pXHJcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIDYwMDAwKTsgLy8gNjAgc2Vjb25kIHRpbWVvdXRcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBDYWxsIHRoZSBNdXJkZXIgQWdlbnQgQVBJIGRpcmVjdGx5XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goTVVSREVSX0FHRU5UX0FQSV9VUkwsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2FzZURldGFpbHMpLFxyXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBDbGVhciB0aGUgdGltZW91dFxyXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuXHJcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE11cmRlciBBZ2VudCBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgY29uc29sZS5sb2coJ011cmRlciBBZ2VudCBBUEkgcmVzcG9uc2U6JywgZGF0YSk7XHJcblxyXG4gICAgICAvLyBMb2cgdGhlIGZ1bGwgcmVzcG9uc2UgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICBjb25zb2xlLmxvZygnRnVsbCBNdXJkZXIgQWdlbnQgQVBJIHJlc3BvbnNlOicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuXHJcbiAgICAgIC8vIExvZyB0aGUgY29sbGVjdGVkIGRhdGEgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICBpZiAoZGF0YS5kYXRhICYmIGRhdGEuZGF0YS5jb2xsZWN0ZWRfZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdDb2xsZWN0ZWQgZGF0YSBmcm9tIE11cmRlciBBZ2VudDonLCBkYXRhLmRhdGEuY29sbGVjdGVkX2RhdGEpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBMb2cgdGhlIGN1cnJlbnQgc3RlcCBmb3IgZGVidWdnaW5nXHJcbiAgICAgIGlmIChkYXRhLmRhdGEgJiYgZGF0YS5kYXRhLmN1cnJlbnRfc3RlcCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdDdXJyZW50IHN0ZXAgZnJvbSBNdXJkZXIgQWdlbnQ6JywgZGF0YS5kYXRhLmN1cnJlbnRfc3RlcCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIHRoZSByZXNwb25zZSBoYXMgdGhlIGV4cGVjdGVkIGZvcm1hdFxyXG4gICAgICBpZiAoZGF0YS5zdWNjZXNzICYmIGRhdGEuZGF0YSAmJiBkYXRhLmRhdGEuYW5hbHlzaXMpIHtcclxuICAgICAgICAvLyBSZXR1cm4gdGhlIGFuYWx5c2lzIHdpdGggYSBtYXJrZXIgaW5kaWNhdGluZyBpdCdzIGZyb20gdGhlIGxpdmUgYmFja2VuZFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdSZXR1cm5pbmcgc2Vzc2lvbiBJRCBpbiByZXNwb25zZTonLCBkYXRhLnNlc3Npb25faWQpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICByZXNwb25zZTogZGF0YS5kYXRhLmFuYWx5c2lzLFxyXG4gICAgICAgICAgc291cmNlOiAnZGlyZWN0LWJhY2tlbmQnLFxyXG4gICAgICAgICAgc2Vzc2lvbklkOiBkYXRhLnNlc3Npb25faWQgfHwgbnVsbCxcclxuICAgICAgICAgIGlzQ29sbGVjdGluZ0luZm86IGRhdGEuZGF0YS5pc19jb2xsZWN0aW5nX2luZm8gfHwgZmFsc2UsXHJcbiAgICAgICAgICBjdXJyZW50U3RlcDogZGF0YS5kYXRhLmN1cnJlbnRfc3RlcCB8fCBudWxsLFxyXG4gICAgICAgICAgY29sbGVjdGVkRGF0YTogZGF0YS5kYXRhLmNvbGxlY3RlZF9kYXRhIHx8IHt9XHJcbiAgICAgICAgfSwgeyBzdGF0dXM6IDIwMCB9KTtcclxuICAgICAgfSBlbHNlIGlmIChkYXRhLmRhdGE/LmFuYWx5c2lzKSB7XHJcbiAgICAgICAgLy8gQWx0ZXJuYXRpdmUgZm9ybWF0XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1JldHVybmluZyBzZXNzaW9uIElEIGluIHJlc3BvbnNlIChhbHRlcm5hdGl2ZSBmb3JtYXQpOicsIGRhdGEuc2Vzc2lvbl9pZCk7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgIHJlc3BvbnNlOiBkYXRhLmRhdGEuYW5hbHlzaXMsXHJcbiAgICAgICAgICBzb3VyY2U6ICdkaXJlY3QtYmFja2VuZCcsXHJcbiAgICAgICAgICBzZXNzaW9uSWQ6IGRhdGEuc2Vzc2lvbl9pZCB8fCBudWxsLFxyXG4gICAgICAgICAgaXNDb2xsZWN0aW5nSW5mbzogZGF0YS5kYXRhLmlzX2NvbGxlY3RpbmdfaW5mbyB8fCBmYWxzZSxcclxuICAgICAgICAgIGN1cnJlbnRTdGVwOiBkYXRhLmRhdGEuY3VycmVudF9zdGVwIHx8IG51bGwsXHJcbiAgICAgICAgICBjb2xsZWN0ZWREYXRhOiBkYXRhLmRhdGEuY29sbGVjdGVkX2RhdGEgfHwge31cclxuICAgICAgICB9LCB7IHN0YXR1czogMjAwIH0pO1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGEuc3VjY2VzcyAmJiBkYXRhLm1lc3NhZ2UpIHtcclxuICAgICAgICAvLyBTaW1wbGUgc3VjY2VzcyBtZXNzYWdlXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgIHJlc3BvbnNlOiBkYXRhLm1lc3NhZ2UsXHJcbiAgICAgICAgICBzb3VyY2U6ICdkaXJlY3QtYmFja2VuZCcsXHJcbiAgICAgICAgICBzZXNzaW9uSWQ6IGRhdGEuc2Vzc2lvbl9pZCB8fCBudWxsLFxyXG4gICAgICAgICAgaXNDb2xsZWN0aW5nSW5mbzogdHJ1ZSxcclxuICAgICAgICAgIGN1cnJlbnRTdGVwOiAnZ3JlZXRpbmcnXHJcbiAgICAgICAgfSwgeyBzdGF0dXM6IDIwMCB9KTtcclxuICAgICAgfSBlbHNlIGlmIChkYXRhLnJlc3BvbnNlKSB7XHJcbiAgICAgICAgLy8gU2ltcGxlIHJlc3BvbnNlIGZvcm1hdFxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICByZXNwb25zZTogZGF0YS5yZXNwb25zZSxcclxuICAgICAgICAgIHNvdXJjZTogJ2RpcmVjdC1iYWNrZW5kJyxcclxuICAgICAgICAgIHNlc3Npb25JZDogZGF0YS5zZXNzaW9uX2lkIHx8IG51bGwsXHJcbiAgICAgICAgICBpc0NvbGxlY3RpbmdJbmZvOiB0cnVlLFxyXG4gICAgICAgICAgY3VycmVudFN0ZXA6ICdncmVldGluZydcclxuICAgICAgICB9LCB7IHN0YXR1czogMjAwIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFRyeSB0byBleHRyYWN0IGluZm9ybWF0aW9uIGZyb20gdGhlIHJlc3BvbnNlIGV2ZW4gaWYgaXQgZG9lc24ndCBtYXRjaCBleHBlY3RlZCBmb3JtYXRzXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gZXh0cmFjdCBpbmZvcm1hdGlvbiBmcm9tIG5vbi1zdGFuZGFyZCByZXNwb25zZSBmb3JtYXQ6JywgZGF0YSk7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYW55IHNlc3Npb25faWQgaW4gdGhlIHJlc3BvbnNlXHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gZGF0YS5zZXNzaW9uX2lkIHx8IG51bGw7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYW55IG1lc3NhZ2Ugb3IgdGV4dCB0aGF0IGNvdWxkIGJlIHVzZWQgYXMgYSByZXNwb25zZVxyXG4gICAgICAgIGxldCByZXNwb25zZVRleHQgPSBudWxsO1xyXG4gICAgICAgIGlmIChkYXRhLmRhdGEgJiYgdHlwZW9mIGRhdGEuZGF0YSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgIHJlc3BvbnNlVGV4dCA9IGRhdGEuZGF0YS5hbmFseXNpcyB8fCBkYXRhLmRhdGEubWVzc2FnZSB8fCBkYXRhLmRhdGEucmVzcG9uc2UgfHwgbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2VUZXh0ICYmIHR5cGVvZiBkYXRhLm1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICByZXNwb25zZVRleHQgPSBkYXRhLm1lc3NhZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXJlc3BvbnNlVGV4dCAmJiB0eXBlb2YgZGF0YS5yZXNwb25zZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgIHJlc3BvbnNlVGV4dCA9IGRhdGEucmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiB3ZSBmb3VuZCBzb21ldGhpbmcgdXNhYmxlLCByZXR1cm4gaXRcclxuICAgICAgICBpZiAocmVzcG9uc2VUZXh0KSB7XHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2VUZXh0LFxyXG4gICAgICAgICAgICBzb3VyY2U6ICdkaXJlY3QtYmFja2VuZCcsXHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICBpc0NvbGxlY3RpbmdJbmZvOiB0cnVlLFxyXG4gICAgICAgICAgICBjdXJyZW50U3RlcDogJ2dyZWV0aW5nJ1xyXG4gICAgICAgICAgfSwgeyBzdGF0dXM6IDIwMCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0IGZyb20gTXVyZGVyIEFnZW50IEFQSTonLCBkYXRhKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0IGZyb20gTXVyZGVyIEFnZW50IEFQSScpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIC8vIENsZWFyIHRoZSB0aW1lb3V0IGlmIGl0IGhhc24ndCBmaXJlZCB5ZXRcclxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcblxyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxsaW5nIE11cmRlciBBZ2VudCBBUEkgZGlyZWN0bHk6JywgZXJyb3IpO1xyXG5cclxuICAgICAgLy8gSWYgdGhlIGVycm9yIGlzIGR1ZSB0byB0aGUgdGltZW91dCwgcmV0dXJuIGEgc3BlY2lmaWMgbWVzc2FnZVxyXG4gICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgYXQgdGhlIGFuYWx5c2lzIHN0ZXAgKGZpbmFsIHN0ZXApXHJcbiAgICAgICAgY29uc3QgaXNBbmFseXNpc1N0ZXAgPSBjYXNlRGV0YWlscy5jdXJyZW50X3N0ZXAgPT09ICdhZGRpdGlvbmFsX25vdGVzJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2FzZURldGFpbHMuY29sbGVjdGVkX2RhdGEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGNhc2VEZXRhaWxzLmNvbGxlY3RlZF9kYXRhKS5sZW5ndGggPiA1KTtcclxuXHJcbiAgICAgICAgaWYgKGlzQW5hbHlzaXNTdGVwKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnVGltZW91dCBvY2N1cnJlZCBkdXJpbmcgYW5hbHlzaXMgZ2VuZXJhdGlvbiwgcmV0dXJuaW5nIGEgaGVscGZ1bCBtZXNzYWdlJyk7XHJcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICByZXNwb25zZTogXCJJJ20gZ2VuZXJhdGluZyBhIGRldGFpbGVkIGFuYWx5c2lzIG9mIHlvdXIgY2FzZSwgYnV0IGl0J3MgdGFraW5nIGxvbmdlciB0aGFuIGV4cGVjdGVkLiBUaGlzIGlzIG5vcm1hbCBmb3IgY29tcGxleCBjYXNlcy4gUGxlYXNlIHRyeSBzZW5kaW5nICdjb250aW51ZScgb3IgJ2FuYWx5emUnIHRvIGNvbXBsZXRlIHRoZSBhbmFseXNpcy5cIixcclxuICAgICAgICAgICAgc291cmNlOiAnZXJyb3InLFxyXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IGNhc2VEZXRhaWxzLnNlc3Npb25faWQgfHwgbnVsbCxcclxuICAgICAgICAgICAgaXNDb2xsZWN0aW5nSW5mbzogdHJ1ZSxcclxuICAgICAgICAgICAgY3VycmVudFN0ZXA6ICdhbmFseXNpc19wZW5kaW5nJ1xyXG4gICAgICAgICAgfSwgeyBzdGF0dXM6IDIwMCB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgICAgcmVzcG9uc2U6IFwiSSdtIHNvcnJ5LCBidXQgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIE11cmRlciBBZ2VudCBiYWNrZW5kIHRpbWVkIG91dC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlciBvciBjaGVjayBpZiB0aGUgYmFja2VuZCBzZXJ2aWNlIGlzIHJ1bm5pbmcuXCIsXHJcbiAgICAgICAgICAgIHNvdXJjZTogJ2Vycm9yJyxcclxuICAgICAgICAgICAgc2Vzc2lvbklkOiBudWxsLFxyXG4gICAgICAgICAgICBpc0NvbGxlY3RpbmdJbmZvOiBmYWxzZVxyXG4gICAgICAgICAgfSwgeyBzdGF0dXM6IDIwMCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEZhbGwgYmFjayB0byB0aGUgb3JpZ2luYWwgcm91dGVcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBmYWxsYmFja1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvbXVyZGVyLWFnZW50Jywge1xyXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBxdWVzdGlvbiwgY29udGV4dCB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZmFsbGJhY2tSZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZhbGxiYWNrUmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgICAgcmVzcG9uc2U6IGRhdGEucmVzcG9uc2UsXHJcbiAgICAgICAgICAgIHNvdXJjZTogJ2ZhbGxiYWNrJyxcclxuICAgICAgICAgICAgc2Vzc2lvbklkOiBkYXRhLnNlc3Npb25JZCB8fCBudWxsLFxyXG4gICAgICAgICAgICBpc0NvbGxlY3RpbmdJbmZvOiBkYXRhLmlzQ29sbGVjdGluZ0luZm8gfHwgZmFsc2UsXHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwOiBkYXRhLmN1cnJlbnRTdGVwIHx8IG51bGwsXHJcbiAgICAgICAgICAgIGNvbGxlY3RlZERhdGE6IGRhdGEuY29sbGVjdGVkRGF0YSB8fCBudWxsXHJcbiAgICAgICAgICB9LCB7IHN0YXR1czogMjAwIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhbGxiYWNrIE11cmRlciBBZ2VudCBBUEkgY2FsbCBmYWlsZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGZhbGxiYWNrRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3aXRoIGZhbGxiYWNrIE11cmRlciBBZ2VudCBBUEkgY2FsbDonLCBmYWxsYmFja0Vycm9yKTtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgcmVzcG9uc2U6IGBJJ20gc29ycnksIGJ1dCBJIGNvdWxkbid0IGNvbm5lY3QgdG8gdGhlIE11cmRlciBBZ2VudCBiYWNrZW5kLiBUaGUgZXJyb3Igd2FzOiAke2Vycm9yLm1lc3NhZ2V9LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyIG9yIGNoZWNrIGlmIHRoZSBiYWNrZW5kIHNlcnZpY2UgaXMgcnVubmluZy5gLFxyXG4gICAgICAgICAgc291cmNlOiAnZXJyb3InLFxyXG4gICAgICAgICAgc2Vzc2lvbklkOiBudWxsLFxyXG4gICAgICAgICAgaXNDb2xsZWN0aW5nSW5mbzogZmFsc2VcclxuICAgICAgICB9LCB7IHN0YXR1czogMjAwIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBkaXJlY3QgTXVyZGVyIEFnZW50IHJlcXVlc3Q6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgcmVzcG9uc2U6IGBJJ20gc29ycnksIGJ1dCB0aGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB5b3VyIHJlcXVlc3Q6ICR7ZXJyb3IubWVzc2FnZX0uIFBsZWFzZSB0cnkgYWdhaW4uYCxcclxuICAgICAgc291cmNlOiAnZXJyb3InLFxyXG4gICAgICBzZXNzaW9uSWQ6IG51bGwsXHJcbiAgICAgIGlzQ29sbGVjdGluZ0luZm86IGZhbHNlXHJcbiAgICB9LCB7IHN0YXR1czogMjAwIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiTVVSREVSX0FHRU5UX0FQSV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfTVVSREVSX0FHRU5UX0FQSV9VUkwiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwicXVlc3Rpb24iLCJlcnJvciIsInN0YXR1cyIsImNvbnRleHQiLCJzZXNzaW9uSWQiLCJjb25zb2xlIiwibG9nIiwiY2FzZURldGFpbHMiLCJhZGRpdGlvbmFsX25vdGVzIiwic2Vzc2lvbl9pZCIsImZvcmNlX2FuYWx5c2lzIiwicmVzZXRfY29udmVyc2F0aW9uIiwiZm9yY2VfbmV3X3Nlc3Npb24iLCJ0cmltIiwiZm9yY2VSZXNldCIsImNhc2VJZCIsImNhc2VfaWQiLCJjYXNlTmFtZSIsImNhc2VfbmFtZSIsImNhc2VTdGF0dXMiLCJjYXNlX3N0YXR1cyIsImNhc2VQcmlvcml0eSIsImNhc2VfcHJpb3JpdHkiLCJhc3NpZ25lZFRvIiwiYXNzaWduZWRfdG8iLCJhc3NpZ25lZERhdGUiLCJhc3NpZ25lZF9kYXRlIiwibG9jYXRpb24iLCJjcmltZURhdGUiLCJkYXRlX29mX2NyaW1lIiwiY3JpbWVUaW1lIiwidGltZV9vZl9jcmltZSIsInZpY3RpbU5hbWUiLCJ2aWN0aW1fbmFtZSIsInZpY3RpbUFnZSIsInZpY3RpbV9hZ2UiLCJ2aWN0aW1HZW5kZXIiLCJ2aWN0aW1fZ2VuZGVyIiwiY2F1c2VPZkRlYXRoIiwiY2F1c2Vfb2ZfZGVhdGgiLCJ3ZWFwb25Vc2VkIiwid2VhcG9uX3VzZWQiLCJjcmltZVNjZW5lRGVzY3JpcHRpb24iLCJjcmltZV9zY2VuZV9kZXNjcmlwdGlvbiIsIndpdG5lc3NlcyIsImV2aWRlbmNlIiwiZXZpZGVuY2VfZm91bmQiLCJzdXNwZWN0cyIsImNvbGxlY3RlZERhdGEiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwiY3VycmVudFN0ZXAiLCJjdXJyZW50X3N0ZXAiLCJEYXRlIiwibm93IiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInNpZ25hbCIsImNsZWFyVGltZW91dCIsIm9rIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwiZGF0YSIsImNvbGxlY3RlZF9kYXRhIiwic3VjY2VzcyIsImFuYWx5c2lzIiwic291cmNlIiwiaXNDb2xsZWN0aW5nSW5mbyIsImlzX2NvbGxlY3RpbmdfaW5mbyIsIm1lc3NhZ2UiLCJyZXNwb25zZVRleHQiLCJuYW1lIiwiaXNBbmFseXNpc1N0ZXAiLCJrZXlzIiwibGVuZ3RoIiwiZmFsbGJhY2tSZXNwb25zZSIsImZhbGxiYWNrRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/murder-agent/direct/route.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmurder-agent%2Fdirect%2Froute&page=%2Fapi%2Fmurder-agent%2Fdirect%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmurder-agent%2Fdirect%2Froute.ts&appDir=C%3A%5Cpython_programs%5CAIjusticegrid%5CAiJusticeGrid%5Cinvestigation-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cpython_programs%5CAIjusticegrid%5CAiJusticeGrid%5Cinvestigation-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();